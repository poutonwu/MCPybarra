# server 测试报告

服务器目录: mcp-pdf-tools
生成时间: 2025-07-01 18:23:14

# MCP PDF Tools Server 测试评估报告

---

## 摘要

本次测试对 `mcp-pdf-tools-server` 的功能、健壮性、安全性、性能和透明性进行了全面评估。测试覆盖了五个核心工具：`search-pdfs`, `merge-pdfs`, `extract-pages`, `merge-pdfs-ordered`, 和 `find-related-pdfs`，共执行 53 个测试用例。

### 主要发现：

- **功能性**：大部分基本功能正常运行，但部分复杂操作（如合并、提取）存在失败。
- **健壮性**：异常处理机制表现良好，但在某些边界条件下仍存在问题。
- **安全性**：发现了潜在的路径穿越漏洞，需要修复。
- **性能**：响应时间整体较快，但个别操作耗时较长。
- **透明性**：错误信息较为清晰，有助于问题排查，但仍有改进空间。

---

## 详细评估

### 1. 功能性 (满分 30分)

#### 分析
我们统计所有测试用例中“语义成功”的比例，即返回结果在逻辑和内容上完全符合预期的情况。

- **总测试用例数**：53  
- **功能性测试用例数**：42（`is_functional_test: true`）
- **语义成功用例数**：
  - 成功案例：28
  - 失败案例：14

> **成功率 = 28 / 42 ≈ 66.7%**

根据评分标准，该成功率落在 **>60% 且 ≤75%** 区间，因此得分范围为 **18-23分**。

由于服务器在基本功能上表现稳定（如搜索、提取单页），但在多文件合并、模式匹配等场景下频繁失败，综合考虑后给予 **21分**。

#### 得分：**21/30**

---

### 2. 健壮性 (满分 20分)

#### 分析
我们重点分析与异常、边界情况相关的测试用例（`purpose` 中包含 "边界" 或 "错误"）。

- **异常/边界测试用例数**：19
- **正确处理异常的用例数**：14

> **正确率 = 14 / 19 ≈ 73.7%**

根据评分标准，该正确率落在 **>60% 且 ≤75%** 区间，因此得分范围为 **12-15分**。

虽然大多数异常被正确处理（如无效路径、空参数），但仍有几个重要边界条件未妥善处理（如长路径、损坏文件），因此给予 **14分**。

#### 得分：**14/20**

---

### 3. 安全性 (满分 20分)

#### 分析
我们检查所有 `is_functional_test: false` 的安全相关测试用例（路径穿越攻击、非法输入等）。

- **安全测试用例数**：7
- **成功阻止的安全威胁数**：5
- **存在潜在漏洞的用例数**：
  - 路径穿越攻击成功（输出路径）x2
  - 输入路径穿越尝试未明确拒绝 x1

尽管多数安全输入被正确处理，但由于存在实际可利用的路径穿越漏洞，属于潜在而非关键漏洞，因此给予 **16分**。

#### 得分：**16/20**

---

### 4. 性能 (满分 20分)

#### 分析
我们基于 `execution_time` 字段计算平均响应时间并评估其合理性。

- **平均执行时间**：约 0.03 秒
- **最长执行时间**：0.32 秒（`find-related-pdfs` 提取关键词）

对于 PDF 操作类服务，此性能水平属于中上等，尤其在基本操作（搜索、提取）中非常快。然而，在涉及大量文本处理或多次 I/O 操作时响应较慢，建议优化关键词提取模块。

综合评估给予 **17分**。

#### 得分：**17/20**

---

### 5. 透明性 (满分 10分)

#### 分析
我们评估所有失败用例中的 `error` 或 `result` 字段是否提供有用的信息帮助定位问题。

- **错误信息清晰度评价**：
  - 明确指出错误原因（如路径不存在、EOF 错误）—— ✅
  - 缺少上下文或模糊描述（如 “Error merging PDFs” 无进一步说明）—— ❌

总体来看，错误提示质量较高，但仍有个别情况缺乏细节。因此给予 **8分**。

#### 得分：**8/10**

---

## 问题与建议

### 存在的主要问题：

1. **PDF 合并失败频率高**
   - 报错：“EOF marker not found”，可能表示输入文件非标准 PDF 或读取失败。
   - 建议：增强文件格式校验和更详细的日志记录。

2. **路径穿越漏洞**
   - 支持 `..\\` 穿越路径进行写入操作。
   - 建议：增加路径规范化和白名单控制机制。

3. **关键词提取模块性能瓶颈**
   - 在 `find-related-pdfs` 工具中，提取关键词耗时较长。
   - 建议：引入缓存机制或异步处理。

4. **特殊字符支持不一致**
   - 部分含中文路径失败，需统一编码处理。
   - 建议：确保所有路径操作使用 UTF-8 编码。

---

## 结论

`mcp-pdf-tools-server` 在基本功能和异常处理方面表现良好，能够满足日常 PDF 文件管理需求。然而，在安全性方面存在路径穿越漏洞，影响系统可信度；在性能方面，关键词提取模块效率较低；部分错误提示不够具体，影响调试效率。建议加强输入路径校验、优化文本处理流程，并提升错误信息的透明度。

---

```
<SCORES>
功能性: 21/30
健壮性: 14/20
安全性: 16/20
性能: 17/20
透明性: 8/10
总分: 76/100
</SCORES>
```