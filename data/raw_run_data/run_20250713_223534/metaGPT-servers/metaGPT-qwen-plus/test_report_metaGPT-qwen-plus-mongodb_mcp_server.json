{
  "server_name": "mongodb_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-mongodb_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\mongodb_mcp_server.py",
  "timestamp": "2025-07-13T22:35:41.089668",
  "tools": [
    {
      "name": "mcp_list_databases",
      "description": "\n    列出MongoDB服务器上的所有数据库。\n\n    Returns:\n        一个包含数据库名称列表的JSON字符串。\n    \n    Raises:\n        OperationFailure: 如果获取数据库列表时发生错误。\n    ",
      "args_schema": {
        "properties": {},
        "title": "mcp_list_databasesArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_list_collections",
      "description": "\n    列出指定数据库中的所有集合。\n\n    Args:\n        database_name: 要列出集合的数据库名称 (必填)。\n\n    Returns:\n        一个包含集合名称列表的JSON字符串。\n    \n    Raises:\n        ValueError: 如果数据库名称为空或空白字符。\n        OperationFailure: 如果获取集合列表时发生错误。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          }
        },
        "required": [
          "database_name"
        ],
        "title": "mcp_list_collectionsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_insert_document",
      "description": "\n    向指定数据库和集合中插入新文档。\n\n    Args:\n        database_name: 要插入文档的数据库名称 (必填)。\n        collection_name: 要插入文档的集合名称 (必填)。\n        document: 要插入的文档数据 (必填)，以字典形式提供。\n\n    Returns:\n        一个字符串，表示插入成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称为空，或者文档不是字典类型。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "document": {
            "title": "Document",
            "type": "object"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "document"
        ],
        "title": "mcp_insert_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_find_documents",
      "description": "\n    在指定数据库和集合中查询符合条件的文档。\n\n    Args:\n        database_name: 要查询的数据库名称 (必填)。\n        collection_name: 要查询的集合名称 (必填)。\n        query: 查询条件 (必填)，以字典形式提供。\n        projection: 投影参数 (可选)，指定要返回的字段。\n        limit: 限制返回结果数量 (可选)，0表示无限制。\n\n    Returns:\n        一个包含查询结果的JSON字符串。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "projection": {
            "default": null,
            "title": "Projection",
            "type": "object"
          },
          "limit": {
            "default": 0,
            "title": "Limit",
            "type": "integer"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_find_documentsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_update_document",
      "description": "\n    更新指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要更新文档的数据库名称 (必填)。\n        collection_name: 要更新文档的集合名称 (必填)。\n        query: 更新条件 (必填)，以字典形式提供。\n        update: 更新内容 (必填)，以字典形式提供。\n        multi: 是否更新多个文档 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示更新成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称、查询条件或更新内容无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "update": {
            "title": "Update",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query",
          "update"
        ],
        "title": "mcp_update_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_delete_document",
      "description": "\n    删除指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要删除文档的数据库名称 (必填)。\n        collection_name: 要删除文档的集合名称 (必填)。\n        query: 删除条件 (必填)，以字典形式提供。\n        multi: 是否批量删除模式 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示删除成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_delete_documentArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "mcp_list_databases": [
      {
        "case_name": "基本功能测试 - 成功列出所有数据库",
        "purpose": "验证工具能够成功连接MongoDB并列出所有数据库",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.006995439529418945,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 无敏感参数泄露",
        "purpose": "确认该工具不涉及敏感信息传输或存储，且默认调用方式不会暴露凭据",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.0039997100830078125,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 模拟MongoDB连接失败",
        "purpose": "验证当无法连接到MongoDB时，工具是否能正确抛出OperationFailure异常",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.00400090217590332,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - MongoDB中存在空数据库名称",
        "purpose": "测试当MongoDB中存在空字符串作为数据库名时，工具是否能正确处理",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.003999948501586914,
        "is_functional_test": false
      },
      {
        "case_name": "功能性测试 - 返回结果格式验证",
        "purpose": "验证返回的数据库列表是否为合法JSON格式，并包含预期字段",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.007010459899902344,
        "is_functional_test": true
      },
      {
        "case_name": "错误处理测试 - 权限不足导致获取数据库失败",
        "purpose": "验证当用户权限不足以访问数据库列表时，工具是否能优雅处理错误",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.00400090217590332,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 数据库数量极大值模拟",
        "purpose": "测试工具在MongoDB中存在大量数据库（如1000个）时的处理能力",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": false
      },
      {
        "case_name": "功能性测试 - 验证数据库列表内容准确性",
        "purpose": "确保返回的数据库列表与实际存在的数据库一致",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.007349491119384766,
        "is_functional_test": true
      }
    ],
    "mcp_list_collections": [
      {
        "case_name": "基本功能测试 - 成功列出集合",
        "purpose": "验证工具能够成功连接MongoDB并列出指定数据库中的所有集合",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.008002996444702148,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 参数不包含敏感信息",
        "purpose": "确认该工具在调用时不会暴露数据库凭据或敏感信息",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.00399327278137207,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": ""
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_list_collections: 'database_name' 不能为空。"
        },
        "execution_time": 0.0030035972595214844,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库不存在",
        "purpose": "验证当指定的数据库不存在时，工具是否抛出OperationFailure异常",
        "args": {
          "database_name": "nonexistent_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0050067901611328125,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 数据库名称为特殊字符",
        "purpose": "测试工具是否能正确处理包含特殊字符的数据库名称",
        "args": {
          "database_name": "db_with_!@#$%^&*"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.004997968673706055,
        "is_functional_test": false
      },
      {
        "case_name": "功能性测试 - 返回结果格式验证",
        "purpose": "验证返回的集合列表是否为合法JSON格式，并包含预期字段",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.003027200698852539,
        "is_functional_test": true
      },
      {
        "case_name": "功能性测试 - 验证集合列表内容准确性",
        "purpose": "确保返回的集合列表与实际存在的集合一致",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.004000663757324219,
        "is_functional_test": true
      }
    ],
    "mcp_insert_document": [
      {
        "case_name": "基本功能测试 - 成功插入文档",
        "purpose": "验证工具能够成功向指定数据库和集合中插入文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {
            "name": "Alice",
            "age": 30,
            "city": "New York"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.01184225082397461,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 参数不包含敏感信息",
        "purpose": "确认该工具在调用时不会暴露数据库凭据或敏感信息",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {
            "username": "user123",
            "password": "securePass123"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.013668298721313477,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "document": {
            "name": "Alice"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.011008739471435547,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "document": {
            "name": "Alice"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.009001016616821289,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 文档不是字典类型",
        "purpose": "验证当提供的文档不是字典类型时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": "[\"not_a_dictionary\"]"
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 1 validation error for mcp_insert_documentArguments\ndocument\n  Input should be a valid dictionary [type=dict_type, input_value=['not_a_dictionary'], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.10/v/dict_type"
        },
        "execution_time": 0.011005401611328125,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 特殊字符的数据库名称",
        "purpose": "测试工具是否能正确处理包含特殊字符的数据库名称",
        "args": {
          "database_name": "db_with_!@#$%^&*",
          "collection_name": "test_collection",
          "document": {
            "key": "value"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.01152491569519043,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 特殊字符的集合名称",
        "purpose": "测试工具是否能正确处理包含特殊字符的集合名称",
        "args": {
          "database_name": "test_db",
          "collection_name": "col_with_!@#$%^&*",
          "document": {
            "key": "value"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.009015798568725586,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 插入空文档",
        "purpose": "验证工具是否能正确处理插入空文档的情况",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.009240865707397461,
        "is_functional_test": true
      }
    ],
    "mcp_find_documents": [
      {
        "case_name": "基本功能测试 - 成功查询文档",
        "purpose": "验证工具能够成功在指定数据库和集合中查询符合条件的文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.014758586883544922,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 参数不包含敏感信息",
        "purpose": "确认该工具调用时不会暴露数据库凭据或敏感信息",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "username": "test_user"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.010009288787841797,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'database_name' 不能为空。"
        },
        "execution_time": 0.009251594543457031,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'collection_name' 不能为空。"
        },
        "execution_time": 0.012991666793823242,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 查询条件为空",
        "purpose": "验证当查询条件为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.014635801315307617,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 使用特殊字符作为数据库名称",
        "purpose": "测试工具是否能正确处理包含特殊字符的数据库名称",
        "args": {
          "database_name": "db_with_!@#$%^&*",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.012005329132080078,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 使用特殊字符作为集合名称",
        "purpose": "测试工具是否能正确处理包含特殊字符的集合名称",
        "args": {
          "database_name": "test_db",
          "collection_name": "col#with@special",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005999088287353516,
        "is_functional_test": false
      },
      {
        "case_name": "基本功能测试 - 带投影参数查询文档",
        "purpose": "验证工具能够使用projection参数过滤返回字段",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          },
          "projection": {
            "_id": 0,
            "name": 1
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.015458345413208008,
        "is_functional_test": true
      }
    ],
    "mcp_update_document": [
      {
        "case_name": "基本功能测试 - 成功更新单个文档",
        "purpose": "验证工具能够成功更新指定数据库和集合中的单个文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Alice"
          },
          "update": {
            "$set": {
              "age": 30
            }
          },
          "multi": false
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003998756408691406,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能测试 - 成功更新多个文档",
        "purpose": "验证当multi参数为True时，工具能够更新多个符合条件的文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "age": {
              "$lt": 25
            }
          },
          "update": {
            "$inc": {
              "age": 1
            }
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005000591278076172,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能测试 - 默认multi参数更新单个文档",
        "purpose": "验证当multi参数未提供时，默认只更新单个文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Bob"
          },
          "update": {
            "$set": {
              "status": "active"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.009002923965454102,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 参数不包含敏感信息",
        "purpose": "确认更新文档时不会暴露数据库凭据或敏感信息",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Charlie"
          },
          "update": {
            "$set": {
              "password": "secure123"
            }
          },
          "multi": false
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.006997585296630859,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "name": "David"
          },
          "update": {
            "$set": {
              "email": "david@example.com"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.009993553161621094,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "name": "Eve"
          },
          "update": {
            "$set": {
              "email": "eve@example.com"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.009998559951782227,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 查询条件为空",
        "purpose": "验证当查询条件为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "update": {
            "$set": {
              "email": "invalid@example.com"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.008016824722290039,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 数据库名称包含特殊字符",
        "purpose": "测试工具是否能正确处理包含特殊字符的数据库名称",
        "args": {
          "database_name": "db_with_!@#$%^&*",
          "collection_name": "test_collection",
          "query": {
            "name": "Frank"
          },
          "update": {
            "$set": {
              "age": 40
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.007997751235961914,
        "is_functional_test": false
      }
    ],
    "mcp_delete_document": [
      {
        "case_name": "基本功能测试 - 成功删除单个文档",
        "purpose": "验证工具能够成功删除指定数据库和集合中的单个文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "example_document"
          },
          "multi": false
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.01006317138671875,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能测试 - 成功批量删除文档",
        "purpose": "验证工具在 multi=True 模式下可以批量删除符合条件的多个文档",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "category": "test"
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005008220672607422,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 参数不包含敏感信息",
        "purpose": "确认该工具在调用时不会暴露数据库凭据或其他敏感信息",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "sensitive_data"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005574464797973633,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "name": "example_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.008002519607543945,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "name": "example_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.008003950119018555,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 查询条件为空",
        "purpose": "验证当查询条件为空或无效时，工具是否抛出ValueError异常",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.008505105972290039,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 数据库名称为特殊字符",
        "purpose": "测试工具是否能正确处理包含特殊字符的数据库名称",
        "args": {
          "database_name": "db_with_!@#$%^&*",
          "collection_name": "test_collection",
          "query": {
            "name": "example_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.006996631622314453,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 查询条件包含嵌套对象",
        "purpose": "测试工具是否能正确处理包含嵌套结构的复杂查询条件",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "metadata": {
              "author": "test_user",
              "tags": [
                "important",
                "review"
              ]
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.010003805160522461,
        "is_functional_test": false
      }
    ]
  },
  "total_cases": 47
}