{
  "server_name": "image_search_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-image_search_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\image_search_mcp_server.py",
  "timestamp": "2025-07-13T23:08:22.704735",
  "tools": [
    {
      "name": "search_images",
      "description": "\n    根据关键词在指定图片源中检索图片。\n\n    Args:\n        keyword: 搜索关键词。\n        source: 图片源（unsplash, pexels, pixabay）。\n\n    Returns:\n        包含图片链接、作者等信息的JSON字符串。\n\n    Raises:\n        ValueError: 如果图片源无效。\n        httpx.HTTPStatusError: 如果API请求失败。\n    ",
      "args_schema": {
        "properties": {
          "keyword": {
            "title": "Keyword",
            "type": "string"
          },
          "source": {
            "default": "unsplash",
            "title": "Source",
            "type": "string"
          }
        },
        "required": [
          "keyword"
        ],
        "title": "search_imagesArguments",
        "type": "object"
      }
    },
    {
      "name": "download_image",
      "description": "\n    下载并保存指定URL的图片。\n\n    Args:\n        url: 图片URL。\n        filename: 保存的文件名。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        httpx.HTTPStatusError: 如果图片下载失败。\n    ",
      "args_schema": {
        "properties": {
          "url": {
            "title": "Url",
            "type": "string"
          },
          "filename": {
            "title": "Filename",
            "type": "string"
          }
        },
        "required": [
          "url",
          "filename"
        ],
        "title": "download_imageArguments",
        "type": "object"
      }
    },
    {
      "name": "generate_icon",
      "description": "\n    根据描述生成指定尺寸的图标。\n\n    Args:\n        description: 图标描述。\n        size: 图标尺寸，默认为64。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        ValueError: 如果尺寸小于16或大于256。\n    ",
      "args_schema": {
        "properties": {
          "description": {
            "title": "Description",
            "type": "string"
          },
          "size": {
            "default": 64,
            "title": "Size",
            "type": "integer"
          }
        },
        "required": [
          "description"
        ],
        "title": "generate_iconArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_images": [
      {
        "case_name": "Basic Image Search on Default Source",
        "purpose": "验证使用默认图片源（unsplash）根据关键词搜索图片的基本功能是否正常。",
        "args": {
          "keyword": "nature"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=nature&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.967522382736206,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search with Specified Source",
        "purpose": "验证指定图片源（pexels）下根据关键词搜索图片的功能是否正常。",
        "args": {
          "keyword": "technology",
          "source": "pexels"
        },
        "response": {
          "result": "{\"page\":1,\"per_page\":5,\"photos\":[{\"id\":546819,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels.com/photo/close-up-photo-of-programming-of-codes-546819/\",\"photographer\":\"luis gomes\",\"photographer_url\":\"https://www.pexels.com/@luis-gomes-166706\",\"photographer_id\":166706,\"avg_color\":\"#282C44\",\"src\":{\"original\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg\",\"large2x\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=2\\u0026h=650\\u0026w=940\",\"large\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=650\\u0026w=940\",\"medium\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=350\",\"small\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=130\",\"portrait\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=1200\\u0026w=800\",\"landscape\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=627\\u0026w=1200\",\"tiny\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=1\\u0026fit=crop\\u0026h=200\\u0026w=280\"},\"liked\":false,\"alt\":\"Close-up of a computer screen displaying programming code in a dark environment.\"},{\"id\":356056,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels....[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计7325字符，剩余5825字符"
        },
        "execution_time": 2.079760789871216,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search on Alternative Source",
        "purpose": "验证指定另一个有效图片源（pixabay）下搜索图片的功能是否正常。",
        "args": {
          "keyword": "animals",
          "source": "pixabay"
        },
        "response": {
          "result": "{\"total\":1479179,\"totalHits\":500,\"hits\":[{\"id\":9704301,\"pageURL\":\"https://pixabay.com/photos/wheat-cereal-ear-seeds-field-9704301/\",\"type\":\"photo\",\"tags\":\"wheat, cereal, ear, seeds, field, village, rural, growth, nature, agriculture, farm, food\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/09/10/09/wheat-9704301_150.jpg\",\"previewWidth\":150,\"previewHeight\":100,\"webformatURL\":\"https://pixabay.com/get/g2132ed4135302ba412488d16fe14d698720c727e27344191193cfa28a07bb1f487f5b7defa5bac4e8cf280588e98b9b4a3a63757b55d4b26537fb24367af955a_640.jpg\",\"webformatWidth\":640,\"webformatHeight\":427,\"largeImageURL\":\"https://pixabay.com/get/g68cd247b3d28196a463eae2f7b24877b2573d1d15f693d0e52baefe8eec54f741276f59bde7fb81552f259cf0d9f12e226b84a3d2b38e987d12beb923ae37f50_1280.jpg\",\"imageWidth\":6000,\"imageHeight\":4000,\"imageSize\":4550930,\"views\":1806,\"downloads\":1420,\"collections\":3,\"likes\":57,\"comments\":25,\"user_id\":9363663,\"user\":\"Nowaja\",\"userImageURL\":\"https://cdn.pixabay.com/user/2020/09/15/15-16-12-52_250x250.jpg\",\"noAiTraining\":false,\"isAiGenerated\":false,\"isGRated\":true,\"isLowQuality\":0,\"userURL\":\"https://pixabay.com/users/9363663/\"},{\"id\":9702173,\"pageURL\":\"https://pixabay.com/photos/eastern-yellow-robin-yellow-robin-9702173/\",\"type\":\"photo\",\"tags\":\"eastern yellow robin, yellow robin, robin, bird, eopsaltria australis, wildlife, wild, nature, avian, birdwatching, plumage, feathers, australia, australian bush\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/08/07/01/eastern-yellow-rob...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计5792字符，剩余4292字符"
        },
        "execution_time": 2.8040952682495117,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Keyword Search",
        "purpose": "验证空关键词搜索时工具的处理行为，确保API能正确响应或返回合理结果。",
        "args": {
          "keyword": ""
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.6229736804962158,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Source Handling",
        "purpose": "验证当提供无效图片源时工具是否抛出ValueError异常。",
        "args": {
          "keyword": "landscape",
          "source": "invalid_source"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: 无效的图片源: invalid_source"
        },
        "execution_time": 0.004318714141845703,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Keyword",
        "purpose": "验证包含特殊字符的关键词是否被正确处理。",
        "args": {
          "keyword": "sunset@beach#123"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=sunset%40beach%23123&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.758697271347046,
        "is_functional_test": true
      },
      {
        "case_name": "Long Keyword Input",
        "purpose": "验证极长关键词输入下的边界条件处理能力。",
        "args": {
          "keyword": "this is a very long keyword that tests the boundary conditions of the search_images tool and ensures it handles long inputs gracefully"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=this+is+a+very+long+keyword+that+tests+the+boundary+conditions+of+the+search_images+tool+and+ensures+it+handles+long+inputs+gracefully&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 3.5823938846588135,
        "is_functional_test": false
      },
      {
        "case_name": "Security Test - Command Injection Attempt",
        "purpose": "验证工具是否对潜在命令注入尝试进行安全防护。",
        "args": {
          "keyword": "nature; rm -rf /",
          "source": "unsplash"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: "
        },
        "execution_time": 5.456906795501709,
        "is_functional_test": false
      }
    ],
    "download_image": [
      {
        "case_name": "Basic Image Download",
        "purpose": "验证从有效URL下载图片并保存为指定文件名的基本功能是否正常。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "downloaded_image.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\downloaded_image.jpg\"}"
        },
        "execution_time": 8.051637887954712,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image with Special Characters in Filename",
        "purpose": "验证使用包含特殊字符的文件名进行图片下载和保存的功能是否正常。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "image@with#special$.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\image@with#special$.jpg\"}"
        },
        "execution_time": 2.0640103816986084,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image to Existing File",
        "purpose": "验证覆盖已存在文件时工具的行为是否符合预期。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "nature.jpeg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\nature.jpeg\"}"
        },
        "execution_time": 1.6250901222229004,
        "is_functional_test": true
      },
      {
        "case_name": "Invalid URL Handling",
        "purpose": "验证当提供无效或不可访问的URL时，工具是否能正确抛出异常。",
        "args": {
          "url": "https://example.com/nonexistent-image.jpg",
          "filename": "invalid_url_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: Client error '404 Not Found' for url 'https://example.com/nonexistent-image.jpg'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404"
        },
        "execution_time": 2.999530553817749,
        "is_functional_test": false
      },
      {
        "case_name": "Empty URL Input",
        "purpose": "验证空URL输入时工具的参数校验机制是否生效。",
        "args": {
          "url": "",
          "filename": "empty_url_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: Request URL is missing an 'http://' or 'https://' protocol."
        },
        "execution_time": 0.430433988571167,
        "is_functional_test": false
      },
      {
        "case_name": "Security Test - Path Traversal Attempt",
        "purpose": "验证工具是否对潜在路径穿越攻击尝试进行安全防护。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "../../malicious_download.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\../../malicious_download.jpg\"}"
        },
        "execution_time": 1.9093139171600342,
        "is_functional_test": false
      },
      {
        "case_name": "Long Filename Boundary Test",
        "purpose": "验证极长文件名输入下的边界条件处理能力。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "this_is_a_very_long_filename_that_tests_the_boundary_conditions_of_the_download_image_tool_and_ensures_it_handles_long_filenames_gracefully.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\this_is_a_very_long_filename_that_tests_the_boundary_conditions_of_the_download_image_tool_and_ensures_it_handles_long_filenames_gracefully.jpg\"}"
        },
        "execution_time": 1.6121599674224854,
        "is_functional_test": true
      },
      {
        "case_name": "No Write Permission Directory",
        "purpose": "验证目标目录无写权限时工具是否能优雅地处理错误。",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "D:\\devWorkspace\\MCPServer-Generator\\testSystem\\testFiles\\.git\\config\\restricted_write_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: [Errno 2] No such file or directory: 'D:\\\\devWorkspace\\\\MCPServer-Generator\\\\testSystem\\\\testFiles\\\\.git\\\\config\\\\restricted_write_image.jpg'"
        },
        "execution_time": 1.6992254257202148,
        "is_functional_test": false
      }
    ],
    "generate_icon": [
      {
        "case_name": "Basic Icon Generation with Default Size",
        "purpose": "验证使用默认尺寸64生成图标的最基本功能是否正常。",
        "args": {
          "description": "a red apple on white background"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_a_red_apple_on_white_background_64x64.png\"}"
        },
        "execution_time": 0.0049970149993896484,
        "is_functional_test": true
      },
      {
        "case_name": "Icon Generation with Custom Size",
        "purpose": "验证指定非默认尺寸（如128）生成图标的功能是否正常。",
        "args": {
          "description": "mountain landscape with sunset",
          "size": 128
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_mountain_landscape_with_sunset_128x128.png\"}"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": true
      },
      {
        "case_name": "Security Test - Special Characters in Description",
        "purpose": "验证描述中包含特殊字符时工具是否能安全处理，防止注入攻击。",
        "args": {
          "description": "icon for <script>alert('xss')</script>",
          "size": 64
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: [Errno 22] Invalid argument: \"./images\\\\icon_icon_for_<script>alert('xss')</script>_64x64.png\""
        },
        "execution_time": 0.008004903793334961,
        "is_functional_test": false
      },
      {
        "case_name": "Error Handling - Invalid Size Below Minimum",
        "purpose": "验证当提供小于最小允许值的尺寸（如15）时是否抛出ValueError。",
        "args": {
          "description": "technology icon",
          "size": 15
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 15. 有效范围是16到256。"
        },
        "execution_time": 0.005001068115234375,
        "is_functional_test": false
      },
      {
        "case_name": "Error Handling - Invalid Size Above Maximum",
        "purpose": "验证当提供大于最大允许值的尺寸（如257）时是否抛出ValueError。",
        "args": {
          "description": "nature icon",
          "size": 257
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 257. 有效范围是16到256。"
        },
        "execution_time": 0.006525754928588867,
        "is_functional_test": false
      },
      {
        "case_name": "Boundary Test - Minimum Valid Size",
        "purpose": "验证最小有效尺寸（16）下图标生成是否成功。",
        "args": {
          "description": "simple star icon",
          "size": 16
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_simple_star_icon_16x16.png\"}"
        },
        "execution_time": 0.005001544952392578,
        "is_functional_test": true
      },
      {
        "case_name": "Boundary Test - Maximum Valid Size",
        "purpose": "验证最大有效尺寸（256）下图标生成是否成功。",
        "args": {
          "description": "computer monitor icon",
          "size": 256
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_computer_monitor_icon_256x256.png\"}"
        },
        "execution_time": 0.007998943328857422,
        "is_functional_test": true
      },
      {
        "case_name": "Functional Test - Long Description Input",
        "purpose": "验证极长描述输入下的边界条件处理能力。",
        "args": {
          "description": "this is a very long description that tests the boundary conditions of the generate_icon tool and ensures it handles long inputs gracefully without crashing or producing malformed output",
          "size": 64
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_this_is_a_very_long_description_that_tests_the_boundary_conditions_of_the_generate_icon_tool_and_ensures_it_handles_long_inputs_gracefully_without_crashing_or_producing_malformed_output_64x64.png\"}"
        },
        "execution_time": 0.0039997100830078125,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 24
}