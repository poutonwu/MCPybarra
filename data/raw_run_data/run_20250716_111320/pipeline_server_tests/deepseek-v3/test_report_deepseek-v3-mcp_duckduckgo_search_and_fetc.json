{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "deepseek-v3-mcp_duckduckgo_search_and_fetc",
  "server_path": "workspace/pipeline-output-servers/deepseek-v3/mcp_duckduckgo_search_and_fetc/refined/server.py",
  "timestamp": "2025-07-16T11:13:23.087735",
  "tools": [
    {
      "name": "duckduckgo_search",
      "description": "\n    Perform a search on DuckDuckGo and return structured results.\n\n    Args:\n        query: The search term or phrase to query on DuckDuckGo (required).\n        max_results: Maximum number of search results to return (default: 5).\n\n    Returns:\n        A dictionary containing search results with 'title', 'url', and 'snippet' under 'results' key.\n\n    Raises:\n        ValueError: If the query is empty or max_results is invalid.\n        httpx.HTTPStatusError: If the API request fails.\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "max_results": {
            "default": 5,
            "title": "Max Results",
            "type": "integer"
          }
        },
        "required": [
          "query"
        ],
        "title": "duckduckgo_searchArguments",
        "type": "object"
      }
    },
    {
      "name": "fetch_content",
      "description": "\n    Fetch and parse the main text content of a webpage.\n\n    Args:\n        url: The URL of the webpage to scrape (required).\n\n    Returns:\n        A string containing the cleaned, main text content of the webpage.\n\n    Raises:\n        ValueError: If the URL is invalid or empty.\n        httpx.HTTPStatusError: If the request fails.\n    ",
      "args_schema": {
        "properties": {
          "url": {
            "title": "Url",
            "type": "string"
          }
        },
        "required": [
          "url"
        ],
        "title": "fetch_contentArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "duckduckgo_search": [
      {
        "case_name": "Basic Search Query Returns Results",
        "purpose": "验证 duckduckgo_search 能够正确执行基本搜索并返回默认数量的结果",
        "args": {
          "query": "artificial intelligence"
        },
        "response": {
          "result": "{\n  \"results\": [\n    {\n      \"title\": \"Artificial intelligence Artificial intelligence, in its broadest sense, is intelligence exhibited by machines...\",\n      \"url\": \"https://duckduckgo.com/Artificial_intelligence\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/Artificial_intelligence\\\">Artificial intelligence</a> Artificial intelligence, in its broadest sense, is intelligence exhibited by machines...\"\n    },\n    {\n      \"title\": \"A.I. Artificial Intelligence A.I. Artificial Intelligence is a 2001 American science fiction film directed by Steven...\",\n      \"url\": \"https://duckduckgo.com/A.I._Artificial_Intelligence\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/A.I._Artificial_Intelligence\\\">A.I. Artificial Intelligence</a> A.I. Artificial Intelligence is a 2001 American science fiction film directed by Steven...\"\n    },\n    {\n      \"title\": \"Artificial intelligence in video games In video games, artificial intelligence is used to generate responsive, adaptive or intelligent...\",\n      \"url\": \"https://duckduckgo.com/Artificial_intelligence_in_video_games\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/Artificial_intelligence_in_video_games\\\">Artificial intelligence in video games</a>In video games, artificial intelligence is used to generate responsive, adaptive or intelligent...\"\n    }\n  ]\n}"
        },
        "execution_time": 1.7026801109313965,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Max Results Parameter",
        "purpose": "验证 duckduckgo_search 在指定 max_results 参数下能正确返回指定数量的搜索结果",
        "args": {
          "query": "machine learning",
          "max_results": 3
        },
        "response": {
          "result": "{\n  \"results\": [\n    {\n      \"title\": \"Machine learning Category\",\n      \"url\": \"https://duckduckgo.com/c/Machine_learning\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/c/Machine_learning\\\">Machine learning Category</a>\"\n    },\n    {\n      \"title\": \"Deep learning — branch of ML concerned with artificial neural network s.\",\n      \"url\": \"https://duckduckgo.com/Deep_learning\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/Deep_learning\\\">Deep learning</a> — branch of ML concerned with <a href=\\\"https://duckduckgo.com/?q=Artificial%20neural%20network\\\">artificial neural network</a>s.\"\n    },\n    {\n      \"title\": \"M-theory (learning framework) - In machine learning and computer vision, M-theory is a learning framework inspired by feed-forward processing in the ventral stream of visual cortex and originally developed for recognition and classification of objects in visual scenes.\",\n      \"url\": \"https://duckduckgo.com/M-theory_(learning_framework)\",\n      \"snippet\": \"<a href=\\\"https://duckduckgo.com/M-theory_(learning_framework)\\\">M-theory (learning framework)</a> - In machine learning and computer vision, M-theory is a learning framework inspired by feed-forward processing in the ventral stream of visual cortex and originally developed for recognition and classification of objects in visual scenes.\"\n    }\n  ]\n}"
        },
        "execution_time": 8.161198616027832,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Query Triggers ValueError",
        "purpose": "验证当 query 参数为空时，工具抛出 ValueError 异常",
        "args": {
          "query": ""
        },
        "response": {
          "error": "ToolException: Error executing tool duckduckgo_search: Query cannot be empty."
        },
        "execution_time": 0.0027658939361572266,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Max Results Value Handling",
        "purpose": "验证当 max_results 为负数或非整数时是否能正确处理错误",
        "args": {
          "query": "quantum computing",
          "max_results": -1
        },
        "response": {
          "error": "ToolException: Error executing tool duckduckgo_search: max_results must be between 1 and 10."
        },
        "execution_time": 0.003998756408691406,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Query",
        "purpose": "验证搜索包含特殊字符的查询字符串是否正常处理",
        "args": {
          "query": "!@#$%^&*()_+{}|:\"<>?"
        },
        "response": {
          "error": "ToolException: Error executing tool duckduckgo_search: Redirect response '301 Moved Permanently' for url 'https://api.duckduckgo.com/?q=!@#$%^&*()_+{}|:%22%3C%3E?&format=json&no_html=1&no_redirect=1'\nRedirect location: 'https://duckduckgo.com'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/301"
        },
        "execution_time": 1.3451249599456787,
        "is_functional_test": true
      },
      {
        "case_name": "Long Query Input Handling",
        "purpose": "验证非常长的查询输入是否被正确处理",
        "args": {
          "query": "This is a very long search query that tests the system's ability to handle large input sizes without crashing or returning an error"
        },
        "response": {
          "result": "{\n  \"results\": [],\n  \"warning\": \"No results found. This may be due to API limitations or query restrictions.\"\n}"
        },
        "execution_time": 1.2885096073150635,
        "is_functional_test": true
      },
      {
        "case_name": "Security Test - Injection Attempt",
        "purpose": "验证工具对潜在注入攻击（如 shell 命令）的防护能力",
        "args": {
          "query": "'; rm -rf /; #"
        },
        "response": {
          "error": "ToolException: Error executing tool duckduckgo_search: Redirect response '301 Moved Permanently' for url 'https://api.duckduckgo.com/?q=';%20rm%20-rf%20/;%20#&format=json&no_html=1&no_redirect=1'\nRedirect location: 'https://duckduckgo.com'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/301"
        },
        "execution_time": 1.2442524433135986,
        "is_functional_test": false
      },
      {
        "case_name": "Boundary Test - Zero Max Results",
        "purpose": "验证当 max_results 设置为 0 时的行为是否符合预期（边界条件测试）",
        "args": {
          "query": "robotics",
          "max_results": 0
        },
        "response": {
          "error": "ToolException: Error executing tool duckduckgo_search: max_results must be between 1 and 10."
        },
        "execution_time": 0.0039577484130859375,
        "is_functional_test": false
      }
    ],
    "fetch_content": [
      {
        "case_name": "Empty URL Triggers ValueError",
        "purpose": "验证当 url 参数为空时，工具抛出 ValueError 异常",
        "args": {
          "url": ""
        },
        "response": {
          "error": "ToolException: Error executing tool fetch_content: URL cannot be empty."
        },
        "execution_time": 0.009233951568603516,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid URL Format Handling",
        "purpose": "验证无效的 URL 格式是否被正确处理并抛出异常",
        "args": {
          "url": "htp:/invalid-url-format"
        },
        "response": {
          "error": "ToolException: Error executing tool fetch_content: HTTPStatusError.__init__() missing 1 required keyword-only argument: 'response'"
        },
        "execution_time": 0.40572094917297363,
        "is_functional_test": false
      }
    ]
  },
  "total_cases": 10
}