# server Test Report

Server Directory: refined
Generated at: 2025-07-16 11:16:38

```markdown
# MCP 服务器测试评估报告

## 摘要

本次测试针对 `deepseek-v3-mcp_arxiv_paper_processor` 服务器进行了全面的功能、健壮性、安全性、性能和透明性评估，共计执行了 **32个测试用例**。整体来看：

- **功能性表现良好**：大多数核心功能运行正常，但存在部分下载失败情况。
- **健壮性较强**：大部分异常处理机制有效，但在某些错误类型中仍需优化。
- **安全性达标**：未发现明显安全漏洞，输入过滤机制较为完善。
- **性能差异较大**：搜索响应时间波动大，部分查询耗时较高。
- **透明性一般**：部分错误信息描述模糊，影响问题定位。

---

## 详细评估

### 1. 功能性 (满分 30分)

#### 测试分析

- 总测试用例数：**32**
- 功能性测试用例数（`is_functional_test == true`）：**19**
- 成功用例数：
  - `search_papers`: 6/7 成功（仅第一个失败）
  - `download_paper`: 4/8 成功（多个HTTP错误）
  - `list_papers`: 5/8 成功
  - `read_paper`: 3/9 成功（多数文件不存在）

> 注：成功标准为返回结果在逻辑和内容上符合预期，而非仅看是否报错。

- 语义成功率 = 19 / 32 ≈ **59.38%**

#### 评分区间判定

- **≤60% 的测试用例语义成功** → **功能性得分：18分以下**
- 实际得分：**17分**

---

### 2. 健壮性 (满分 20分)

#### 测试分析

- 异常用例主要集中在：
  - 参数边界检查（如负值、空值）
  - 错误输入格式（如无效paper_id）
  - 特殊字符处理
- 正确处理的异常用例：
  - 空查询验证 ✅
  - 负max_results验证 ✅
  - 无效mode验证 ✅
  - XSS尝试拦截 ✅
- 存在改进空间：
  - HTTP请求异常构造不完整 ❌（缺少request/response参数）

- 总异常用例数：**12**
- 正确处理数：**9**
- 正确率 = 9 / 12 = **75%**

#### 评分区间判定

- **>75% 且 ≤95% 的异常用例被正确处理** → **16-19分**
- 实际得分：**18分**

---

### 3. 安全性 (满分 20分)

#### 测试分析

- 安全相关用例（`XSS Attempt`类）：
  - `search_papers`: 输入 `<script>alert('xss')</script>` 返回无害结果 ✅
  - `download_paper`: 同样安全拒绝恶意输入 ✅
  - `read_paper`: 拒绝非法路径访问 ✅
- 所有潜在攻击输入均被安全处理，未出现注入或路径穿越等行为。
- 内容截断为适配器限制，不影响安全性判断。

#### 评分结论

- **100% 的安全威胁被成功阻止**
- 实际得分：**20分**

---

### 4. 性能 (满分 20分)

#### 测试分析

- 平均响应时间分布：
  - 快速响应（<1s）：多数基础操作（如列表、读取）✅
  - 中等延迟（1~5s）：部分搜索与下载 ✅
  - 高延迟（>5s）：多见于复杂查询（如中文特殊字符、大量结果）⚠️
- 最长响应时间：**22.34s**（搜索含XSS的中文查询）

#### 评分建议

- 多数操作响应合理，但个别查询效率较低。
- 综合考虑工具性质（学术论文检索），给予中等偏上评分。

- 实际得分：**16分**

---

### 5. 透明性 (满分 10分)

#### 测试分析

- 报错信息质量：
  - 明确描述原因（如“Paper ID cannot be empty.”）✅
  - 缺乏上下文信息（如HTTP异常缺少request/response）❌
  - 文件未找到提示清晰，但缺乏路径检查建议 ⚠️

#### 评分建议

- 错误信息总体可用，但部分关键错误描述不够详细。

- 实际得分：**7分**

---

## 问题与建议

### 主要问题

| 类别       | 问题描述                                                                 |
|------------|--------------------------------------------------------------------------|
| 功能性     | 下载PDF时HTTP异常构造不完整，导致错误无法追溯                             |
| 性能       | 部分搜索响应时间过长（超过20秒），可能影响用户体验                         |
| 透明性     | HTTP错误未提供足够上下文信息（缺少 request 和 response 字段）              |

### 改进建议

1. **增强HTTP错误信息完整性**
   - 在抛出HTTPStatusError时补充request和response字段，便于调试。

2. **优化搜索性能**
   - 对包含特殊字符或非英文查询进行预处理，避免长时间阻塞。

3. **提升错误日志结构化程度**
   - 增加错误码、错误类型字段，方便自动化监控和分类。

4. **加强本地文件路径验证**
   - 在read_paper/download_paper中增加路径合法性校验，防止路径穿越攻击。

---

## 结论

该服务器在功能性方面表现尚可，但部分工具（如download_paper）存在稳定性问题；健壮性和安全性较好，能够正确处理大部分边界条件和恶意输入；性能方面存在优化空间，尤其在搜索响应时间上；透明性一般，错误信息虽明确但缺乏上下文支持。

综合来看，服务器已具备基本可用性，但仍需在稳定性、性能和透明性方面进一步优化。

---

```
<SCORES>
功能性: 17/30
健壮性: 18/20
安全性: 20/20
性能: 16/20
透明性: 7/10
总分: 78/100
</SCORES>
```