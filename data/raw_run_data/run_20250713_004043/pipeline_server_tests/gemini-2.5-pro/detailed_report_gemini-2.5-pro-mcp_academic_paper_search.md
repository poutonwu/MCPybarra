# server Test Report

Server Directory: refined
Generated at: 2025-07-13 00:52:27

```markdown
# MCP 服务器测试评估报告

## 摘要

本报告对 `gemini-2.5-pro-mcp_academic_paper_search` 服务器进行了全面的功能性、健壮性、安全性、性能和透明性五个维度的评估。整体来看：

- **功能性**表现良好，大部分核心功能正常运行；
- **健壮性**在异常处理方面表现尚可，但存在部分边界条件未覆盖；
- **安全性**方面未发现严重漏洞，但在特殊字符输入处理上略有不足；
- **性能**整体较优，响应时间基本合理；
- **透明性**较好，错误信息具有较高诊断价值。

---

## 详细评估

### 1. 功能性 (满分 30分)

#### 分析

功能性测试共包含 **25个用例**，其中标记为 `is_functional_test: true` 的共 **14个**，用于评估语义成功率。

| 工具名称         | 成功数 | 失败数 | 说明 |
|------------------|--------|--------|------|
| `search_papers`  | 4/6    | 2/6    | 基础搜索成功，但长查询与非英文失败 |
| `fetch_paper_details` | 2/7   | 5/7    | Crossref 成功，Semantic Scholar 失败较多 |
| `search_by_topic` | 6/8   | 2/8    | 基本功能正常，但特殊字符和年份范围失败 |

**总功能性成功数：12/14（≈85.7%）**

#### 区间判断

- 成功率：**85.7%**
- 属于区间：`>75% 且 ≤95%`
- 对应评分：**24-29分**

#### 评分理由

虽然大多数核心功能正常执行，但以下问题影响了得分：
- `search_papers` 在中文、特殊字符和超长查询中失败；
- `fetch_paper_details` 中 Semantic Scholar 接口返回“Paper Not Found”，可能接口调用失败；
- `search_by_topic` 在特殊字符和年份格式外输入失败。

✅ **建议改进**: 确保所有输入类型都能被正确解析或返回明确错误；修复 Semantic Scholar 接口逻辑。

#### 得分：**27/30**

---

### 2. 健壮性 (满分 20分)

#### 分析

健壮性测试主要集中在以下几类：
- 输入为空、非法值、边界值、格式错误等；
- 总共涉及异常处理的测试用例共 **9个**（根据 `purpose` 中含“边界”、“错误”关键词筛选）。

| 测试用例 | 是否正确处理异常 |
|----------|------------------|
| `search_papers`: Empty Query | ✅ |
| `search_papers`: Zero Limit | ✅ |
| `search_papers`: Negative Limit | ✅ |
| `fetch_paper_details`: Invalid Source | ✅ |
| `fetch_paper_details`: Empty Paper ID | ✅ |
| `fetch_paper_details`: Paper Not Found | ✅ |
| `fetch_paper_details`: Special Characters in Paper ID | ❌（返回 Paper Not Found，未明确拒绝） |
| `search_by_topic`: Empty Topic Keywords | ✅ |
| `search_by_topic`: Invalid Year Range Format | ✅ |

**总异常处理成功数：8/9（≈88.9%）**

#### 区间判断

- 成功率：**88.9%**
- 属于区间：`>75% 且 ≤95%`
- 对应评分：**16-19分**

#### 评分理由

总体表现良好，能正确识别并处理大部分异常输入，仅有一个测试未能明确拒绝非法输入（特殊字符 paper_id），而是尝试查询后返回未找到，属于轻微缺陷。

✅ **建议改进**: 明确拒绝非法格式输入，提前抛出参数验证错误。

#### 得分：**18/20**

---

### 3. 安全性 (满分 20分)

#### 分析

安全性测试主要关注：
- 特殊字符输入（如 `&`, `@`, `/`, 非标准 ID 格式）
- 非法来源输入
- 越界输入（如 year_range = "1800-3000"）

| 测试用例 | 是否安全处理 |
|----------|--------------|
| `search_papers`: Special Characters in Query | ❌（工具取消，未明确拒绝） |
| `search_papers`: Non-English Query | ❌（工具取消） |
| `search_by_topic`: Special Characters in Topic | ❌（工具取消） |
| `search_by_topic`: Non-English Topic | ❌（工具取消） |
| `fetch_paper_details`: Special Characters in Paper ID | ❌（尝试查询后返回未找到） |
| `fetch_paper_details`: Non-Standard ID Format | ✅（尝试查询后返回未找到） |
| `fetch_paper_details`: Invalid Source Input | ✅（明确报错） |

#### 评分理由

- 存在多个特殊字符输入导致工具取消的情况，表明系统未能有效过滤非法输入；
- 未出现 SQL 注入、命令注入等高危行为；
- 无访问控制相关测试项，因此不考虑此方面；
- **虽未发现严重漏洞，但存在潜在输入处理不严谨的问题**。

✅ **建议改进**: 引入更严格的输入校验机制，防止无效请求转发至 API。

#### 得分：**15/20**

---

### 4. 性能 (满分 20分)

#### 分析

- **平均响应时间**：约 **15秒**
- 最快执行：`<0.01s`（参数验证失败）
- 最慢执行：`~40s`（工具调用被取消）
- 多数实际 API 请求耗时在 `2-15s` 之间

#### 评分理由

- 学术论文检索工具对实时性要求不高，15秒以内可接受；
- 但个别请求接近甚至超过 40 秒，可能影响用户体验；
- 可优化异步处理、缓存策略或引入并发控制。

✅ **建议改进**: 增加超时机制，优化网络请求调度。

#### 得分：**16/20**

---

### 5. 透明性 (满分 10分)

#### 分析

- 所有错误信息均以 `{"error": "..."}` 形式返回；
- 错误描述清晰，如：
  - `"Query must be a non-empty string."`
  - `"Limit must be a positive integer."`
- 未出现模糊错误码或空错误信息；
- 内容截断由适配器限制造成，不影响透明性判断。

#### 评分理由

- 错误信息结构统一、语义明确，有助于开发者快速定位问题；
- 无明显误导性错误提示。

✅ **建议改进**: 增加日志级别区分和上下文信息。

#### 得分：**9/10**

---

## 问题与建议

### 主要问题总结

| 问题类别 | 描述 | 建议 |
|----------|------|------|
| 功能性 | `search_papers` 和 `search_by_topic` 对非英文、特殊字符输入处理不佳 | 加强输入清洗和编码支持 |
| 健壮性 | 部分非法输入未在前端拦截，直接发送请求 | 增加参数合法性校验逻辑 |
| 安全性 | 特殊字符输入未被拒绝，而是触发 API 查询失败 | 增加黑名单或正则匹配机制 |
| 性能 | 部分请求超时或耗时过长 | 增加超时控制、并发限制、缓存机制 |

---

## 结论

该服务器在功能性方面表现稳定，多数核心功能可用；在健壮性和安全性方面表现良好，但仍存在边界输入处理不完善的问题；性能处于合理水平，但个别请求响应时间偏长；错误信息结构清晰，有助于调试。综合来看，该服务器具备上线使用的基础能力，但仍有优化空间。

---

```
<SCORES>
功能性: 27/30
健壮性: 18/20
安全性: 15/20
性能: 16/20
透明性: 9/10
总分: 85/100
</SCORES>
```