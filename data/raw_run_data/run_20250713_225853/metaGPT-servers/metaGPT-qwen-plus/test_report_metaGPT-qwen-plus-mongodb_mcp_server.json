{
  "server_name": "mongodb_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-mongodb_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\mongodb_mcp_server.py",
  "timestamp": "2025-07-13T22:59:00.941549",
  "tools": [
    {
      "name": "mcp_list_databases",
      "description": "\n    列出MongoDB服务器上的所有数据库。\n\n    Returns:\n        一个包含数据库名称列表的JSON字符串。\n    \n    Raises:\n        OperationFailure: 如果获取数据库列表时发生错误。\n    ",
      "args_schema": {
        "properties": {},
        "title": "mcp_list_databasesArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_list_collections",
      "description": "\n    列出指定数据库中的所有集合。\n\n    Args:\n        database_name: 要列出集合的数据库名称 (必填)。\n\n    Returns:\n        一个包含集合名称列表的JSON字符串。\n    \n    Raises:\n        ValueError: 如果数据库名称为空或空白字符。\n        OperationFailure: 如果获取集合列表时发生错误。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          }
        },
        "required": [
          "database_name"
        ],
        "title": "mcp_list_collectionsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_insert_document",
      "description": "\n    向指定数据库和集合中插入新文档。\n\n    Args:\n        database_name: 要插入文档的数据库名称 (必填)。\n        collection_name: 要插入文档的集合名称 (必填)。\n        document: 要插入的文档数据 (必填)，以字典形式提供。\n\n    Returns:\n        一个字符串，表示插入成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称为空，或者文档不是字典类型。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "document": {
            "title": "Document",
            "type": "object"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "document"
        ],
        "title": "mcp_insert_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_find_documents",
      "description": "\n    在指定数据库和集合中查询符合条件的文档。\n\n    Args:\n        database_name: 要查询的数据库名称 (必填)。\n        collection_name: 要查询的集合名称 (必填)。\n        query: 查询条件 (必填)，以字典形式提供。\n        projection: 投影参数 (可选)，指定要返回的字段。\n        limit: 限制返回结果数量 (可选)，0表示无限制。\n\n    Returns:\n        一个包含查询结果的JSON字符串。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "projection": {
            "default": null,
            "title": "Projection",
            "type": "object"
          },
          "limit": {
            "default": 0,
            "title": "Limit",
            "type": "integer"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_find_documentsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_update_document",
      "description": "\n    更新指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要更新文档的数据库名称 (必填)。\n        collection_name: 要更新文档的集合名称 (必填)。\n        query: 更新条件 (必填)，以字典形式提供。\n        update: 更新内容 (必填)，以字典形式提供。\n        multi: 是否更新多个文档 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示更新成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称、查询条件或更新内容无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "update": {
            "title": "Update",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query",
          "update"
        ],
        "title": "mcp_update_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_delete_document",
      "description": "\n    删除指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要删除文档的数据库名称 (必填)。\n        collection_name: 要删除文档的集合名称 (必填)。\n        query: 删除条件 (必填)，以字典形式提供。\n        multi: 是否批量删除模式 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示删除成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_delete_documentArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "mcp_list_databases": [
      {
        "case_name": "基本功能-列出所有数据库",
        "purpose": "验证mcp_list_databases工具能正确列出MongoDB服务器上的所有数据库。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004000425338745117,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感参数泄露",
        "purpose": "确认该工具在调用过程中不会泄露敏感信息，如连接字符串、密码等。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.0035753250122070312,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-MongoDB服务不可用",
        "purpose": "验证当MongoDB服务未运行时，工具是否能正确抛出OperationFailure异常。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.005002498626708984,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-空数据库列表",
        "purpose": "验证当MongoDB中没有任何数据库时，工具是否能返回一个空的JSON数组。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.0059969425201416016,
        "is_functional_test": true
      },
      {
        "case_name": "功能测试-多次调用稳定性",
        "purpose": "测试工具连续多次调用是否稳定，结果是否一致且无副作用。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004001617431640625,
        "is_functional_test": true
      },
      {
        "case_name": "错误处理测试-权限不足",
        "purpose": "验证当当前用户没有权限访问数据库列表时，工具是否能优雅处理并抛出OperationFailure。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.003998517990112305,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-数据库名称含特殊字符",
        "purpose": "验证当数据库名称包含特殊字符（如空格、中文、符号）时，工具是否能正确返回这些名称。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.005993843078613281,
        "is_functional_test": true
      },
      {
        "case_name": "功能性测试-与测试文件无关",
        "purpose": "该工具不涉及文件操作，因此确认其行为不受测试文件影响。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.0040035247802734375,
        "is_functional_test": true
      }
    ],
    "mcp_list_collections": [
      {
        "case_name": "基本功能-列出指定数据库中的集合",
        "purpose": "验证mcp_list_collections工具能正确列出指定数据库中的所有集合。",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.004999399185180664,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感参数泄露",
        "purpose": "确认该工具在调用过程中不会泄露敏感信息，如连接字符串、密码等。",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.005999088287353516,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": ""
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_list_collections: 'database_name' 不能为空。"
        },
        "execution_time": 0.0060024261474609375,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-数据库不存在",
        "purpose": "验证当指定的数据库不存在时，工具是否抛出OperationFailure异常。",
        "args": {
          "database_name": "nonexistent_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.006994724273681641,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-数据库名含空白字符",
        "purpose": "验证当数据库名称包含空白字符时，是否抛出ValueError异常。",
        "args": {
          "database_name": " test_db "
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0060100555419921875,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-数据库名含特殊字符",
        "purpose": "验证当数据库名称包含特殊字符（如中文、符号）时，工具是否能正确返回这些集合。",
        "args": {
          "database_name": "测试数据库!@#"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.10739612579345703,
        "is_functional_test": true
      },
      {
        "case_name": "功能性测试-多次调用稳定性",
        "purpose": "测试工具连续多次调用是否稳定，结果是否一致且无副作用。",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0030040740966796875,
        "is_functional_test": true
      },
      {
        "case_name": "错误处理测试-权限不足",
        "purpose": "验证当当前用户没有权限访问指定数据库时，工具是否能优雅处理并抛出OperationFailure。",
        "args": {
          "database_name": "restricted_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0029990673065185547,
        "is_functional_test": false
      }
    ],
    "mcp_insert_document": [
      {
        "case_name": "基本功能-插入文档到指定数据库和集合",
        "purpose": "验证mcp_insert_document工具能正确将字典格式的文档插入到指定的数据库和集合中。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {
            "name": "Alice",
            "age": 30,
            "city": "Beijing"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004511594772338867,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感信息泄露",
        "purpose": "确认调用该工具时，不会在响应或日志中泄露连接字符串、密码等敏感信息。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {
            "sensitive_data": "this_should_not_leak"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005999326705932617,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "document": {
            "name": "Bob"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.007001161575317383,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "document": {
            "name": "Charlie"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.005000114440917969,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-文档参数不是字典类型",
        "purpose": "验证当提供的文档不是一个字典类型时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": "not_a_dictionary"
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 1 validation error for mcp_insert_documentArguments\ndocument\n  Input should be a valid dictionary [type=dict_type, input_value='not_a_dictionary', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/dict_type"
        },
        "execution_time": 0.006998777389526367,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-数据库名含特殊字符",
        "purpose": "验证当数据库名称包含特殊字符（如空格、中文、符号）时，工具是否仍能正常插入文档。",
        "args": {
          "database_name": "测试数据库!@#",
          "collection_name": "test_collection",
          "document": {
            "key": "value"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003998756408691406,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-集合名含特殊字符",
        "purpose": "验证当集合名称包含特殊字符时，工具是否仍能正常插入文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "集合_123!@#",
          "document": {
            "item": "test"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004001140594482422,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-插入空文档",
        "purpose": "验证工具是否允许插入一个空字典作为文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0060007572174072266,
        "is_functional_test": true
      }
    ],
    "mcp_find_documents": [
      {
        "case_name": "基本功能-查询匹配文档",
        "purpose": "验证mcp_find_documents工具能正确在指定数据库和集合中查询符合条件的文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.00500035285949707,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能-带投影查询文档",
        "purpose": "验证当提供projection参数时，工具是否能正确返回指定字段。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          },
          "projection": {
            "name": 1,
            "_id": 0
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005013704299926758,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能-限制结果数量",
        "purpose": "验证当limit参数大于0时，工具是否能正确限制返回的文档数量。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "limit": 5
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005991458892822266,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感信息泄露",
        "purpose": "确认该工具在调用过程中不会泄露敏感信息，如连接字符串、密码等。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "password": "secret"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.00299835205078125,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'database_name' 不能为空。"
        },
        "execution_time": 0.00699615478515625,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'collection_name' 不能为空。"
        },
        "execution_time": 0.003999233245849609,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-无效查询条件",
        "purpose": "验证当查询条件不是字典类型时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": "invalid_query"
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 1 validation error for mcp_find_documentsArguments\nquery\n  Input should be a valid dictionary [type=dict_type, input_value='invalid_query', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/dict_type"
        },
        "execution_time": 0.0029981136322021484,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-数据库名含特殊字符",
        "purpose": "验证当数据库名称包含特殊字符（如空格、中文、符号）时，工具是否能正确查询文档。",
        "args": {
          "database_name": "测试数据库!@#",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0060122013092041016,
        "is_functional_test": true
      }
    ],
    "mcp_update_document": [
      {
        "case_name": "基本功能-更新单个文档",
        "purpose": "验证mcp_update_document工具能正确更新指定数据库和集合中的单个文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "_id": 1
          },
          "update": {
            "$set": {
              "name": "Updated Name"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003999471664428711,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能-更新多个文档",
        "purpose": "验证当multi参数为True时，mcp_update_document工具能正确更新多个符合条件的文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          },
          "update": {
            "$set": {
              "status": "inactive"
            }
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003000974655151367,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感信息泄露",
        "purpose": "确认在调用mcp_update_document过程中不会泄露敏感信息，如数据库连接字符串、用户凭证等。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "username": "user1"
          },
          "update": {
            "$set": {
              "password": "secure_pass"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.010001182556152344,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-数据库名称为空",
        "purpose": "验证当数据库名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "_id": 1
          },
          "update": {
            "$set": {
              "name": "Updated Name"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.0039975643157958984,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-集合名称为空",
        "purpose": "验证当集合名称为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "_id": 1
          },
          "update": {
            "$set": {
              "name": "Updated Name"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.003509521484375,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-数据库名含特殊字符",
        "purpose": "验证当数据库名称包含特殊字符（如中文、符号）时，工具是否能正常操作。",
        "args": {
          "database_name": "测试数据库!@#",
          "collection_name": "test_collection",
          "query": {
            "_id": 2
          },
          "update": {
            "$set": {
              "name": "Special DB Updated"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003998756408691406,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-查询条件为空对象",
        "purpose": "验证当查询条件为空字典时，工具是否会更新所有文档（取决于底层实现）。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "update": {
            "$inc": {
              "counter": 1
            }
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.006000518798828125,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-更新字段不存在",
        "purpose": "验证当尝试更新一个不存在的字段时，工具是否能正确插入该字段并设置值。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "_id": 3
          },
          "update": {
            "$set": {
              "new_field": "added_value"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003003835678100586,
        "is_functional_test": true
      }
    ],
    "mcp_delete_document": [
      {
        "case_name": "基本功能-删除匹配单个文档",
        "purpose": "验证mcp_delete_document工具能正确删除指定数据库和集合中符合查询条件的单个文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Alice"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0055065155029296875,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能-批量删除多个文档",
        "purpose": "验证当multi参数为True时，mcp_delete_document工具能批量删除所有符合条件的文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "inactive"
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0029997825622558594,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试-无敏感信息泄露",
        "purpose": "确认在执行删除操作时，不会泄露数据库连接字符串、用户凭证或其他敏感信息。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "sensitive_user"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-无效数据库名称",
        "purpose": "验证当提供的数据库名称为空或无效时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "name": "test"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.003998994827270508,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-无效集合名称",
        "purpose": "验证当提供的集合名称为空或无效时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "name": "test"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.007001161575317383,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试-无效查询条件",
        "purpose": "验证当提供的查询条件不是字典格式或为空时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": null
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 1 validation error for mcp_delete_documentArguments\nquery\n  Input should be a valid dictionary [type=dict_type, input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.10/v/dict_type"
        },
        "execution_time": 0.005001068115234375,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试-删除空文档集",
        "purpose": "验证当没有文档满足查询条件时，工具是否返回成功但不删除任何文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "nonexistent_user"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.00500035285949707,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试-特殊字符作为查询键值",
        "purpose": "验证当查询条件包含特殊字符（如中文、符号）时，工具是否能正常处理并正确删除文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "用户名": "张三",
            "标签": "#VIP"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005997657775878906,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 48
}