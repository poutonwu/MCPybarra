# server Test Report

Server Directory: refined
Generated at: 2025-07-16 11:00:41

# MCP 服务器测试评估报告

## 摘要

本次测试对 `deepseek-v3-mcp_pdf_automation_toolkit` 服务器进行了全面的功能、健壮性、安全性、性能和透明性评估，共执行了 **40 个测试用例**，涵盖 `search_pdfs`、`merge_pdfs`、`extract_pages`、`find_related_pdfs` 和 `merge_pdfs_ordered` 五个核心工具。

### 总体表现

- **功能性**：部分功能未能成功执行，主要是由于输出路径错误或文件未找到，但多数逻辑判断正确。
- **健壮性**：在边界和错误处理方面表现较好，但仍有改进空间。
- **安全性**：在安全测试中，工具能有效阻止对系统根目录的访问，但部分安全响应不够明确。
- **性能**：大多数操作响应时间良好，但存在个别耗时较长的搜索操作。
- **透明性**：错误信息基本清晰，但在部分失败用例中缺乏详细说明。

---

## 详细评估

---

### 1. 功能性（满分 30 分）

#### 分析

功能性测试共 **25 个用例**，其中：

- **语义成功用例**：
  - `search_pdfs`: 6 个成功
  - `merge_pdfs`: 0 个成功（所有合并均失败）
  - `extract_pages`: 0 个成功（均报错）
  - `find_related_pdfs`: 4 个成功
  - `merge_pdfs_ordered`: 0 个成功

**总计语义成功用例：10 / 25**

**成功率 = 10 / 25 = 40%**

#### 区间判断

- 成功率 **≤60%**，属于 **18分以下** 区间。

#### 评分

**功能性: 16/30**

---

### 2. 健壮性（满分 20 分）

#### 分析

健壮性测试共 **10 个用例**（包含边界、空输入、无效路径等）：

- 成功处理的异常用例：
  - `search_pdfs` 空目录：1
  - `merge_pdfs` 空列表：1
  - `extract_pages` 空页码列表：1
  - `find_related_pdfs` 空目录：1
  - `merge_pdfs_ordered` 空排序列表：1
  - `merge_pdfs_ordered` 无效排序项：1

- 失败处理的异常用例：
  - `search_pdfs` 根目录访问超时（未明确拒绝）：1
  - `merge_pdfs` 根目录输出权限拒绝：1
  - `extract_pages` 根目录输出失败（未明确拒绝）：1
  - `merge_pdfs_ordered` 根目录输出失败（未明确拒绝）：1

**总计异常用例：10，成功处理：6**

**成功率 = 6 / 10 = 60%**

#### 区间判断

- 成功率 **>60% 且 ≤75%**，属于 **12-15分** 区间。

#### 评分

**健壮性: 13/20**

---

### 3. 安全性（满分 20 分）

#### 分析

安全测试用例共 **5 个**，主要测试对系统根目录的访问控制：

- 成功阻止的用例：
  - `search_pdfs` 根目录访问超时（应拒绝）：1
  - `merge_pdfs` 根目录输出权限拒绝：1
  - `extract_pages` 根目录输出失败（应拒绝）：1
  - `merge_pdfs_ordered` 根目录输出失败（应拒绝）：1

- 未完全阻止或响应不明确：
  - `find_related_pdfs` 尝试访问根目录时出现错误但未明确拒绝：1

**总计安全用例：5，完全成功阻止：4**

#### 评分判断

- 存在潜在漏洞（非关键）：**12-19分**
- 由于一个用例响应不够明确，扣分

#### 评分

**安全性: 16/20**

---

### 4. 性能（满分 20 分）

#### 分析

基于 `execution_time` 分析：

- 多数测试用例执行时间在 0.01 - 0.1 秒之间，响应迅速。
- 个别用例耗时较长：
  - `search_pdfs` wildcard only 匹配耗时 16.9s
  - `find_related_pdfs` 基础搜索超时 50s
- 平均响应时间：约 3.5s（受超时影响）

#### 评分判断

- 多数操作性能良好，但存在明显性能瓶颈
- 未出现完全不可接受的延迟（如超时可优化）

#### 评分

**性能: 15/20**

---

### 5. 透明性（满分 10 分）

#### 分析

错误信息整体较为清晰，能指出具体错误原因（如路径不存在、权限拒绝、页码越界等）：

- **优点**：
  - 多数错误信息包含具体错误类型（如 FileNotFoundError）
  - 对无效输入、空列表等有明确提示

- **不足**：
  - 部分错误信息过于模糊（如 "Unresolved named destination"）
  - 超时未返回明确错误信息（如 `find_related_pdfs` 的超时）

#### 评分判断

- 错误信息基本清晰，但部分用例缺乏详细说明

#### 评分

**透明性: 8/10**

---

## 问题与建议

### 主要问题

1. **功能性问题**：
   - 多数 `merge_pdfs`、`extract_pages` 操作失败，提示输出路径不存在。
   - `merge_pdfs_ordered` 的排序逻辑判断错误（如文件名不在列表中）。
   - `find_related_pdfs` 在基础搜索中超时。

2. **健壮性问题**：
   - 对空目录、无效路径等处理基本正确，但个别用例响应不够明确。

3. **安全性问题**：
   - 部分安全测试用例响应未明确拒绝访问（如根目录访问）。

4. **性能问题**：
   - 全目录 wildcard 匹配耗时较长（16.9s）
   - `find_related_pdfs` 搜索未限制范围导致超时

5. **透明性问题**：
   - 部分错误信息不够具体（如 "Unresolved named destination"）

### 改进建议

1. **功能性改进**：
   - 检查输出路径是否自动创建目录结构
   - 优化 `merge_pdfs_ordered` 的排序逻辑，确保文件名匹配准确

2. **健壮性改进**：
   - 统一错误响应格式，明确区分功能性错误与系统错误
   - 增加边界测试用例的覆盖率

3. **安全性改进**：
   - 明确拒绝系统根目录访问，返回统一安全错误信息
   - 增加路径白名单机制，限制访问范围

4. **性能改进**：
   - 优化 wildcard 匹配算法，限制最大文件数
   - 为 `find_related_pdfs` 添加超时机制和结果限制

5. **透明性改进**：
   - 提供更详细的错误日志（如堆栈跟踪）
   - 对模糊错误（如 "Unresolved named destination"）添加解释文档

---

## 结论

`deepseek-v3-mcp_pdf_automation_toolkit` 服务器在功能逻辑设计上较为合理，但在实际执行中存在较多问题，特别是在输出路径处理、排序逻辑和性能方面。安全性方面表现较好，但仍需增强对系统路径的访问控制。整体来看，服务器具备较好的基础能力，但需要进一步优化以提升稳定性和用户体验。

---

```
<SCORES>
功能性: 16/30
健壮性: 13/20
安全性: 16/20
性能: 15/20
透明性: 8/10
总分: 68/100
</SCORES>
```