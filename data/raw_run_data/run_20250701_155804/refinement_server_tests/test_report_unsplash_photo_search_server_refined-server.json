{
  "server_name": "server",
  "parent_dir": "unsplash_photo_search_server_refined",
  "report_name": "unsplash_photo_search_server_refined-server",
  "server_path": "workspace\\refinement\\unsplash_photo_search_server_refined\\server.py",
  "timestamp": "2025-07-01T17:10:22.001684",
  "tools": [
    {
      "name": "search_photos",
      "description": "\n    在Unsplash平台根据关键词、分页、排序、颜色和图片方向等条件搜索图片。\n\n    Args:\n        query: 搜索关键词 (必填)。\n        page: 页码，必须大于等于1，默认为1 (可选)。\n        per_page: 每页结果数，1-30之间，默认为10 (可选)。\n        order_by: 排序方式，可选'relevant'或'latest'，默认为'relevant' (可选)。\n        color: 颜色过滤器，可选值包括'red', 'orange', 'yellow', 'green', 'teal', \n               'blue', 'purple', 'magenta', 'black', 'white', 'gray' (可选)。\n        orientation: 图片方向，可选'landscape', 'portrait', 'squarish' (可选)。\n\n    Returns:\n        包含图片ID、描述、多尺寸URL、宽度和高度等信息的JSON字符串。\n\n    Raises:\n        ValueError: 如果参数验证失败。\n        httpx.HTTPStatusError: 如果API请求失败。\n    \n    示例:\n        search_photos(query=\"nature\", page=1, per_page=5, order_by=\"latest\", \n                     color=\"blue\", orientation=\"landscape\")\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "page": {
            "default": 1,
            "title": "Page",
            "type": "integer"
          },
          "per_page": {
            "default": 10,
            "title": "Per Page",
            "type": "integer"
          },
          "order_by": {
            "default": "relevant",
            "title": "Order By",
            "type": "string"
          },
          "color": {
            "default": null,
            "title": "Color",
            "type": "string"
          },
          "orientation": {
            "default": null,
            "title": "Orientation",
            "type": "string"
          }
        },
        "required": [
          "query"
        ],
        "title": "search_photosArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_photos": [
      {
        "case_name": "Basic Search With Default Parameters",
        "purpose": "验证使用默认参数的基本搜索功能是否正常工作",
        "args": {
          "query": "nature"
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 1000, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"IicyiaPYGGI\", \"description\": \"orange flowers\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUxMzU3MTA1fDA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUxMzU3MTA1fDA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUxMzU3MTA1fDA&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&...[截断]，共计13110字符，剩余12310字符"
        },
        "execution_time": 0.927079439163208,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Custom Page And PerPage",
        "purpose": "验证自定义页码和每页结果数的搜索功能是否正确处理",
        "args": {
          "query": "technology",
          "page": 2,
          "per_page": 15
        },
        "response": {
          "result": "{\"total\": 10156, \"total_pages\": 678, \"current_page\": 2, \"per_page\": 15, \"results\": [{\"id\": \"IayKLkmz6g0\", \"description\": \"A world of technology\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1605810230434-7631ac76ec81?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxNnx8dGVjaG5vbG9neXxlbnwwfHx8fDE3NTEyODIwMzN8MA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1605810230434-7631ac76ec81?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxNnx8dGVjaG5vbG9neXxlbnwwfHx8fDE3NTEyODIwMzN8MA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1605810230434-7631ac76ec81?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxNnx8dGVjaG5vbG9neXxlbnwwfHx8fDE3NTEyODIwMzN8MA&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.unsplash.com/photo-1605810230434...[截断]，共计20237字符，剩余19437字符"
        },
        "execution_time": 0.43317580223083496,
        "is_functional_test": true
      },
      {
        "case_name": "Search Ordered By Latest",
        "purpose": "验证按最新排序的搜索功能是否返回正确顺序的结果",
        "args": {
          "query": "architecture",
          "order_by": "latest"
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 1000, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"CCDgs97vVfI\", \"description\": \"Empty stadium seats under a bright, blue sky.\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1751326370635-c82aeb90512a?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8Mnx8MTc1MTM2MTA4Mnww&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1751326370635-c82aeb90512a?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8Mnx8MTc1MTM2MTA4Mnww&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1751326370635-c82aeb90512a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8Mnx8MTc1MTM2MTA4Mnww&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.u...[截断]，共计13252字符，剩余12452字符"
        },
        "execution_time": 0.6388959884643555,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Color Filter",
        "purpose": "验证颜色过滤器是否能正确限制返回图片的颜色范围",
        "args": {
          "query": "ocean",
          "color": "blue"
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 1000, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"K785Da4A_JA\", \"description\": \"blue and clear body of water\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1559825481-12a05cc00344?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxvY2VhbnxlbnwwfHx8Ymx1ZXwxNzUxMjc0MTEwfDA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1559825481-12a05cc00344?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxvY2VhbnxlbnwwfHx8Ymx1ZXwxNzUxMjc0MTEwfDA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1559825481-12a05cc00344?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxvY2VhbnxlbnwwfHx8Ymx1ZXwxNzUxMjc0MTEwfDA&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.unsplash.com/photo-1559825481-12a05cc00344...[截断]，共计12733字符，剩余11933字符"
        },
        "execution_time": 0.16772699356079102,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Orientation Filter",
        "purpose": "验证图片方向过滤器是否能正确限制返回图片的方向类型",
        "args": {
          "query": "portrait photography",
          "orientation": "portrait"
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 1000, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"6eFmG1qWxJI\", \"description\": \"a woman with blue eyes and a white top\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1563170446-9c3c0622d8a9?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdCUyMHBob3RvZ3JhcGh5fGVufDB8MXx8fDE3NTEzNjEwODN8MA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1563170446-9c3c0622d8a9?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdCUyMHBob3RvZ3JhcGh5fGVufDB8MXx8fDE3NTEzNjEwODN8MA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1563170446-9c3c0622d8a9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdCUyMHBob3RvZ3JhcGh5fGVufDB8MXx8fDE3NTEzNjEwODN8MA&ixlib=rb-4.1.0&q=80&w=1080\", ...[截断]，共计13745字符，剩余12945字符"
        },
        "execution_time": 0.7015719413757324,
        "is_functional_test": true
      },
      {
        "case_name": "Combined Filters Search",
        "purpose": "验证多个筛选条件组合使用时，搜索功能是否正常",
        "args": {
          "query": "mountains",
          "page": 3,
          "per_page": 5,
          "order_by": "relevant",
          "color": "green",
          "orientation": "landscape"
        },
        "response": {
          "result": "{\"total\": 948, \"total_pages\": 190, \"current_page\": 3, \"per_page\": 5, \"results\": [{\"id\": \"A5ykrbT5mGE\", \"description\": \"brown grass field near snow covered mountain under blue sky during daytime\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1615265489318-62c2b522c9fb?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxMXx8bW91bnRhaW5zfGVufDB8MHx8Z3JlZW58MTc1MTM2MTA4NHww&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1615265489318-62c2b522c9fb?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxMXx8bW91bnRhaW5zfGVufDB8MHx8Z3JlZW58MTc1MTM2MTA4NHww&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1615265489318-62c2b522c9fb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxMXx8bW91bnRhaW5zfGVufDB8MHx8Z3JlZW58MTc1MTM2MTA4NHww&ixlib=rb-4.1.0&q=8...[截断]，共计6753字符，剩余5953字符"
        },
        "execution_time": 0.8370869159698486,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Query Input",
        "purpose": "验证未提供查询关键词时是否抛出ValueError异常",
        "args": {
          "query": ""
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: API请求失败，状态码: 400, 响应内容: {\"errors\":[\"query is empty\"]}"
        },
        "execution_time": 0.40432119369506836,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Page Number",
        "purpose": "验证当页码小于1时是否抛出ValueError异常",
        "args": {
          "query": "flowers",
          "page": 0
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 页码必须大于等于1，但收到了: 0"
        },
        "execution_time": 0.027001619338989258,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid PerPage Value Low",
        "purpose": "验证当每页数量小于1时是否抛出ValueError异常",
        "args": {
          "query": "animals",
          "per_page": 0
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 每页结果数必须在1-30之间，但收到了: 0"
        },
        "execution_time": 0.023957490921020508,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid PerPage Value High",
        "purpose": "验证当每页数量大于30时是否抛出ValueError异常",
        "args": {
          "query": "sports",
          "per_page": 31
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 每页结果数必须在1-30之间，但收到了: 31"
        },
        "execution_time": 0.03500056266784668,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid OrderBy Value",
        "purpose": "验证传入无效排序方式时是否抛出ValueError异常",
        "args": {
          "query": "cars",
          "order_by": "invalid_order"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 排序方式必须是'relevant'或'latest'，但收到了: invalid_order"
        },
        "execution_time": 0.016000032424926758,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Color Value",
        "purpose": "验证传入无效颜色值时是否抛出ValueError异常",
        "args": {
          "query": "sky",
          "color": "pink"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 颜色必须是以下之一：['red', 'orange', 'yellow', 'green', 'teal', 'blue', 'purple', 'magenta', 'black', 'white', 'gray']，但收到了: pink"
        },
        "execution_time": 0.013000249862670898,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Orientation Value",
        "purpose": "验证传入无效图片方向值时是否抛出ValueError异常",
        "args": {
          "query": "beach",
          "orientation": "circular"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: 搜索图片时发生错误: 图片方向必须是以下之一：['landscape', 'portrait', 'squarish']，但收到了: circular"
        },
        "execution_time": 0.021001338958740234,
        "is_functional_test": false
      },
      {
        "case_name": "XSS Injection In Query",
        "purpose": "验证工具是否安全地处理包含XSS脚本的查询字符串",
        "args": {
          "query": "<script>alert('xss')</script>"
        },
        "response": {
          "result": "{\"total\": 2400, \"total_pages\": 240, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"yPBgHCsKdWE\", \"description\": \"binary source code – html php java program source code\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1617609277590-ec2d145ca13b?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlM0NzY3JpcHQlM0VhbGVydCUyOCUyN3hzcyUyNyUyOSUzQyUyRnNjcmlwdCUzRXxlbnwwfHx8fDE3NTEzNjEwODV8MA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1617609277590-ec2d145ca13b?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlM0NzY3JpcHQlM0VhbGVydCUyOCUyN3hzcyUyNyUyOSUzQyUyRnNjcmlwdCUzRXxlbnwwfHx8fDE3NTEzNjEwODV8MA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1617609277590-ec2d145ca13b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlM...[截断]，共计15479字符，剩余14679字符"
        },
        "execution_time": 0.4794628620147705,
        "is_functional_test": false
      },
      {
        "case_name": "Minimum PerPage Value",
        "purpose": "验证最小允许的每页结果数是否被正确处理",
        "args": {
          "query": "birds",
          "per_page": 1
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 10000, \"current_page\": 1, \"per_page\": 1, \"results\": [{\"id\": \"cX0Yxw38cx8\", \"description\": \"Flying birds\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1542382156909-9ae37b3f56fd?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxiaXJkc3xlbnwwfHx8fDE3NTEzNjEwODV8MA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1542382156909-9ae37b3f56fd?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxiaXJkc3xlbnwwfHx8fDE3NTEzNjEwODV8MA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1542382156909-9ae37b3f56fd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxiaXJkc3xlbnwwfHx8fDE3NTEzNjEwODV8MA&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.unsplash.com/photo-1542382156909-9ae37b3f56fd?crop=entropy&cs=ti...[截断]，共计1316字符，剩余516字符"
        },
        "execution_time": 0.4928438663482666,
        "is_functional_test": true
      },
      {
        "case_name": "Maximum PerPage Value",
        "purpose": "验证最大允许的每页结果数是否被正确处理",
        "args": {
          "query": "clouds",
          "per_page": 30
        },
        "response": {
          "result": "{\"total\": 10000, \"total_pages\": 334, \"current_page\": 1, \"per_page\": 30, \"results\": [{\"id\": \"M2-_GRvWWg0\", \"description\": \"clouds during daytime\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1542349314-b0ceb4d90f2d?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjbG91ZHN8ZW58MHx8fHwxNzUxMzYxMDg2fDA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1542349314-b0ceb4d90f2d?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjbG91ZHN8ZW58MHx8fHwxNzUxMzYxMDg2fDA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1542349314-b0ceb4d90f2d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjbG91ZHN8ZW58MHx8fHwxNzUxMzYxMDg2fDA&ixlib=rb-4.1.0&q=80&w=1080\", \"small\": \"https://images.unsplash.com/photo-1542349314-b0ceb4d90f2d?crop=entropy&cs=tin...[截断]，共计38050字符，剩余37250字符"
        },
        "execution_time": 0.48073625564575195,
        "is_functional_test": true
      },
      {
        "case_name": "Special Characters In Query",
        "purpose": "验证包含特殊字符的搜索词是否被正确处理",
        "args": {
          "query": "café, résumé, naïve"
        },
        "response": {
          "result": "{\"total\": 2400, \"total_pages\": 240, \"current_page\": 1, \"per_page\": 10, \"results\": [{\"id\": \"oA1R73bdNwo\", \"description\": \"a can of food sitting on top of a table\", \"urls\": {\"raw\": \"https://images.unsplash.com/photo-1697902577366-5d6b80d7877e?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYWYlQzMlQTklMkMlMjByJUMzJUE5c3VtJUMzJUE5JTJDJTIwbmElQzMlQUZ2ZXxlbnwwfHx8fDE3NTEzNjEwODZ8MA&ixlib=rb-4.1.0\", \"full\": \"https://images.unsplash.com/photo-1697902577366-5d6b80d7877e?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYWYlQzMlQTklMkMlMjByJUMzJUE5c3VtJUMzJUE5JTJDJTIwbmElQzMlQUZ2ZXxlbnwwfHx8fDE3NTEzNjEwODZ8MA&ixlib=rb-4.1.0&q=85\", \"regular\": \"https://images.unsplash.com/photo-1697902577366-5d6b80d7877e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYWYlQzMlQTklMkMl...[截断]，共计15436字符，剩余14636字符"
        },
        "execution_time": 0.6245765686035156,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 17
}