{
  "server_name": "image_search_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-image_search_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\image_search_mcp_server.py",
  "timestamp": "2025-07-14T10:43:37.675516",
  "tools": [
    {
      "name": "search_images",
      "description": "\n    根据关键词在指定图片源中检索图片。\n\n    Args:\n        keyword: 搜索关键词。\n        source: 图片源（unsplash, pexels, pixabay）。\n\n    Returns:\n        包含图片链接、作者等信息的JSON字符串。\n\n    Raises:\n        ValueError: 如果图片源无效。\n        httpx.HTTPStatusError: 如果API请求失败。\n    ",
      "args_schema": {
        "properties": {
          "keyword": {
            "title": "Keyword",
            "type": "string"
          },
          "source": {
            "default": "unsplash",
            "title": "Source",
            "type": "string"
          }
        },
        "required": [
          "keyword"
        ],
        "title": "search_imagesArguments",
        "type": "object"
      }
    },
    {
      "name": "download_image",
      "description": "\n    下载并保存指定URL的图片。\n\n    Args:\n        url: 图片URL。\n        filename: 保存的文件名。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        httpx.HTTPStatusError: 如果图片下载失败。\n    ",
      "args_schema": {
        "properties": {
          "url": {
            "title": "Url",
            "type": "string"
          },
          "filename": {
            "title": "Filename",
            "type": "string"
          }
        },
        "required": [
          "url",
          "filename"
        ],
        "title": "download_imageArguments",
        "type": "object"
      }
    },
    {
      "name": "generate_icon",
      "description": "\n    根据描述生成指定尺寸的图标。\n\n    Args:\n        description: 图标描述。\n        size: 图标尺寸，默认为64。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        ValueError: 如果尺寸小于16或大于256。\n    ",
      "args_schema": {
        "properties": {
          "description": {
            "title": "Description",
            "type": "string"
          },
          "size": {
            "default": 64,
            "title": "Size",
            "type": "integer"
          }
        },
        "required": [
          "description"
        ],
        "title": "generate_iconArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_images": [
      {
        "case_name": "Basic Image Search on Default Source",
        "purpose": "验证使用默认图片源（unsplash）根据关键词搜索图片的基本功能是否正常",
        "args": {
          "keyword": "nature"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=nature&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 2.049858331680298,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search on Pexels Source",
        "purpose": "验证指定图片源为pexels时，根据关键词搜索图片的功能是否正常",
        "args": {
          "keyword": "technology",
          "source": "pexels"
        },
        "response": {
          "result": "{\"page\":1,\"per_page\":5,\"photos\":[{\"id\":546819,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels.com/photo/close-up-photo-of-programming-of-codes-546819/\",\"photographer\":\"luis gomes\",\"photographer_url\":\"https://www.pexels.com/@luis-gomes-166706\",\"photographer_id\":166706,\"avg_color\":\"#282C44\",\"src\":{\"original\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg\",\"large2x\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=2\\u0026h=650\\u0026w=940\",\"large\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=650\\u0026w=940\",\"medium\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=350\",\"small\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=130\",\"portrait\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=1200\\u0026w=800\",\"landscape\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=627\\u0026w=1200\",\"tiny\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=1\\u0026fit=crop\\u0026h=200\\u0026w=280\"},\"liked\":false,\"alt\":\"Close-up of a computer screen displaying programming code in a dark environment.\"},{\"id\":356056,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels....[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计7325字符，剩余5825字符"
        },
        "execution_time": 1.9912607669830322,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search on Pixabay Source",
        "purpose": "验证指定图片源为pixabay时，根据关键词搜索图片的功能是否正常",
        "args": {
          "keyword": "animals",
          "source": "pixabay"
        },
        "response": {
          "result": "{\"total\":1479207,\"totalHits\":500,\"hits\":[{\"id\":9704301,\"pageURL\":\"https://pixabay.com/photos/wheat-cereal-ear-seeds-field-9704301/\",\"type\":\"photo\",\"tags\":\"wheat, cereal, ear, seeds, field, village, rural, growth, nature, agriculture, farm, food\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/09/10/09/wheat-9704301_150.jpg\",\"previewWidth\":150,\"previewHeight\":100,\"webformatURL\":\"https://pixabay.com/get/g10d7c35f01ec33c85b1f77d12d908125e032bd60a9d0f1eabccc140156cbcfc9c84931cf872a2404f96438f190cb4c5df2b9de01dd9cb86cc46ac69905de6360_640.jpg\",\"webformatWidth\":640,\"webformatHeight\":427,\"largeImageURL\":\"https://pixabay.com/get/gbe8ba8fe2d38f3841adf738a765439927ce1caad1d3a6d608a1a28385418aec06addacfd3159f8e325a38359343cbc56d1956c30ca7c2f0ed75d7b98dd549b5f_1280.jpg\",\"imageWidth\":6000,\"imageHeight\":4000,\"imageSize\":4550930,\"views\":2142,\"downloads\":1674,\"collections\":3,\"likes\":59,\"comments\":27,\"user_id\":9363663,\"user\":\"Nowaja\",\"userImageURL\":\"https://cdn.pixabay.com/user/2020/09/15/15-16-12-52_250x250.jpg\",\"noAiTraining\":false,\"isAiGenerated\":false,\"isGRated\":true,\"isLowQuality\":0,\"userURL\":\"https://pixabay.com/users/9363663/\"},{\"id\":9702173,\"pageURL\":\"https://pixabay.com/photos/eastern-yellow-robin-yellow-robin-9702173/\",\"type\":\"photo\",\"tags\":\"eastern yellow robin, yellow robin, robin, bird, eopsaltria australis, wildlife, wild, nature, avian, birdwatching, plumage, feathers, australia, australian bush\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/08/07/01/eastern-yellow-rob...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计5714字符，剩余4214字符"
        },
        "execution_time": 1.6834239959716797,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Keyword Search",
        "purpose": "验证空关键词搜索时工具的行为是否符合预期（应返回相关结果或处理机制）",
        "args": {
          "keyword": ""
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.5325212478637695,
        "is_functional_test": true
      },
      {
        "case_name": "Special Characters in Keyword",
        "purpose": "验证包含特殊字符的关键词是否能被正确处理",
        "args": {
          "keyword": "café!@#",
          "source": "unsplash"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=caf%C3%A9%21%40%23&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.517554521560669,
        "is_functional_test": true
      },
      {
        "case_name": "Invalid Image Source",
        "purpose": "验证传入非法图片源时是否会抛出ValueError",
        "args": {
          "keyword": "test",
          "source": "invalid_source"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: 无效的图片源: invalid_source"
        },
        "execution_time": 0.005003690719604492,
        "is_functional_test": false
      },
      {
        "case_name": "XSS Attempt via Keyword",
        "purpose": "验证系统是否对潜在的XSS攻击进行了有效防御",
        "args": {
          "keyword": "<script>alert('xss')</script>",
          "source": "unsplash"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.5643885135650635,
        "is_functional_test": false
      }
    ],
    "download_image": [
      {
        "case_name": "Basic Image Download",
        "purpose": "验证从有效URL下载图片并保存为指定文件名的基本功能是否正常",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "test_image.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\test_image.jpg\"}"
        },
        "execution_time": 1.8984308242797852,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image with Special Characters in Filename",
        "purpose": "验证文件名包含特殊字符时是否能正确处理并保存",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "image@#$.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\image@#$.jpg\"}"
        },
        "execution_time": 1.7420063018798828,
        "is_functional_test": true
      },
      {
        "case_name": "Download from Non-Existent URL",
        "purpose": "验证当提供的图片URL不存在时是否抛出HTTP状态错误",
        "args": {
          "url": "https://example.com/nonexistent/image.jpg",
          "filename": "missing_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: Client error '404 Not Found' for url 'https://example.com/nonexistent/image.jpg'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404"
        },
        "execution_time": 1.9001262187957764,
        "is_functional_test": false
      },
      {
        "case_name": "Download to Protected Directory",
        "purpose": "验证尝试写入受保护目录时是否失败并返回合理错误",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "C:\\Windows\\system32\\test_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: [Errno 13] Permission denied: 'C:\\\\Windows\\\\system32\\\\test_image.jpg'"
        },
        "execution_time": 1.639873743057251,
        "is_functional_test": false
      },
      {
        "case_name": "Overwrite Existing File",
        "purpose": "验证是否可以覆盖已存在的同名文件",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "D:\\devWorkspace\\MCPServer-Generator\\testSystem\\testFiles\\xue.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"D:\\devWorkspace\\MCPServer-Generator\\testSystem\\testFiles\\xue.jpg\"}"
        },
        "execution_time": 1.629293441772461,
        "is_functional_test": true
      },
      {
        "case_name": "XSS Attempt via Filename",
        "purpose": "验证系统是否对潜在的XSS攻击进行了有效防御（通过文件名）",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "<script>alert('xss')</script>.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: [Errno 22] Invalid argument: \"./images\\\\<script>alert('xss')</script>.jpg\""
        },
        "execution_time": 1.6869378089904785,
        "is_functional_test": false
      },
      {
        "case_name": "Very Long Filename",
        "purpose": "验证极长文件名是否能被正确处理或返回适当错误",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "a_very_long_filename_that_exceeds_the_maximum_allowed_length_in_file_system_and_may_cause_errors_or_unexpected_behavior_even_if_valid_characters_are_used.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\a_very_long_filename_that_exceeds_the_maximum_allowed_length_in_file_system_and_may_cause_errors_or_unexpected_behavior_even_if_valid_characters_are_used.jpg\"}"
        },
        "execution_time": 1.690965175628662,
        "is_functional_test": false
      },
      {
        "case_name": "Empty URL Input",
        "purpose": "验证空URL输入时是否抛出参数验证错误",
        "args": {
          "url": "",
          "filename": "empty_url_image.jpg"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: Request URL is missing an 'http://' or 'https://' protocol."
        },
        "execution_time": 0.46845364570617676,
        "is_functional_test": false
      }
    ],
    "generate_icon": [
      {
        "case_name": "Basic Icon Generation with Default Size",
        "purpose": "验证使用默认尺寸64生成图标的基本功能是否正常",
        "args": {
          "description": "a red apple on white background"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_a_red_apple_on_white_background_64x64.png\"}"
        },
        "execution_time": 0.007675886154174805,
        "is_functional_test": true
      },
      {
        "case_name": "Icon Generation with Custom Size",
        "purpose": "验证指定自定义尺寸（如128）时生成图标的正确性",
        "args": {
          "description": "a blue cloud with sun rays",
          "size": 128
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_a_blue_cloud_with_sun_rays_128x128.png\"}"
        },
        "execution_time": 0.005513906478881836,
        "is_functional_test": true
      },
      {
        "case_name": "Minimum Valid Size Test",
        "purpose": "验证最小有效尺寸16是否能成功生成图标",
        "args": {
          "description": "simple checkmark icon",
          "size": 16
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_simple_checkmark_icon_16x16.png\"}"
        },
        "execution_time": 0.003000497817993164,
        "is_functional_test": true
      },
      {
        "case_name": "Maximum Valid Size Test",
        "purpose": "验证最大有效尺寸256是否能成功生成图标",
        "args": {
          "description": "detailed settings gear icon",
          "size": 256
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_detailed_settings_gear_icon_256x256.png\"}"
        },
        "execution_time": 0.005007743835449219,
        "is_functional_test": true
      },
      {
        "case_name": "Size Below Minimum Validation",
        "purpose": "验证当尺寸小于16时是否会抛出ValueError",
        "args": {
          "description": "star icon",
          "size": 15
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 15. 有效范围是16到256。"
        },
        "execution_time": 0.006524324417114258,
        "is_functional_test": false
      },
      {
        "case_name": "Size Above Maximum Validation",
        "purpose": "验证当尺寸大于256时是否会抛出ValueError",
        "args": {
          "description": "lightbulb idea icon",
          "size": 300
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 300. 有效范围是16到256。"
        },
        "execution_time": 0.004000425338745117,
        "is_functional_test": false
      },
      {
        "case_name": "XSS Attempt via Description",
        "purpose": "验证系统是否对潜在的XSS攻击进行了有效防御（通过描述字段）",
        "args": {
          "description": "<script>alert('xss')</script>"
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: [Errno 22] Invalid argument: \"./images\\\\icon_<script>alert('xss')</script>_64x64.png\""
        },
        "execution_time": 0.00451350212097168,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Description",
        "purpose": "验证包含特殊字符的描述是否能被正确处理并生成图标",
        "args": {
          "description": "icon with café!@# symbols"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_icon_with_café!@#_symbols_64x64.png\"}"
        },
        "execution_time": 0.007361888885498047,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 23
}