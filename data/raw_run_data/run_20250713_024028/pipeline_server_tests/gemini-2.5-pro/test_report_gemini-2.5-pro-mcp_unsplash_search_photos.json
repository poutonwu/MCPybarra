{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "gemini-2.5-pro-mcp_unsplash_search_photos",
  "server_path": "workspace/pipeline-output-servers/gemini-2.5-pro/mcp_unsplash_search_photos/refined/server.py",
  "timestamp": "2025-07-13T02:56:52.814609",
  "tools": [
    {
      "name": "search_photos",
      "description": "\n    Searches for photos on Unsplash based on a query and optional filters.\n\n    This function queries the Unsplash API to find photos matching the specified\n    criteria. It requires an Unsplash API Access Key to be set as an\n    environment variable `UNSPLASH_ACCESS_KEY`. The function returns a JSON\n    string containing a list of photo objects, each with details like ID,\n    description, and various image URLs.\n\n    Args:\n        query (str): The search keywords (e.g., \"dogs\", \"office desk\").\n        page (int, optional): The page number to retrieve. Defaults to 1.\n        per_page (int, optional): The number of items per page (max 30).\n            Defaults to 10.\n        order_by (str, optional): The sort order for the results. Valid\n            options are \"latest\" or \"relevant\". Defaults to \"relevant\".\n        color (str, optional): A color filter for the search. Valid options\n            include \"black_and_white\", \"black\", \"white\", \"yellow\", \"orange\",\n            \"red\", \"purple\", \"magenta\", \"green\", \"teal\", \"blue\".\n            Defaults to None.\n        orientation (str, optional): A filter for the photo orientation.\n            Valid options are \"landscape\", \"portrait\", or \"squarish\".\n            Defaults to None.\n\n    Returns:\n        str: A JSON formatted string representing a list of photo objects.\n             If no photos are found, it returns a JSON string of an empty list.\n\n    Raises:\n        ValueError: If the `UNSPLASH_ACCESS_KEY` environment variable is not\n            set or if any of the provided arguments are invalid (e.g.,\n            `per_page` out of range, invalid `order_by` value).\n        httpx.HTTPStatusError: If the Unsplash API returns an HTTP error\n            (e.g., 4xx or 5xx status code).\n        RuntimeError: For any other unexpected errors during execution.\n\n    Example:\n        >>> # Assuming UNSPLASH_ACCESS_KEY is set in the environment\n        >>> # import asyncio\n        >>> # asyncio.run(search_photos(query=\"cats\", per_page=1, orientation=\"squarish\"))\n        '[\n          {\n            \"id\": \"some_photo_id\",\n            \"description\": \"a cat sitting on a window sill\",\n            \"width\": 4000,\n            \"height\": 4000,\n            \"urls\": {\n              \"raw\": \"...\",\n              \"full\": \"...\",\n              \"regular\": \"...\",\n              \"small\": \"...\",\n              \"thumb\": \"...\"\n            }\n          }\n        ]'\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 1,
            "title": "Page"
          },
          "per_page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 10,
            "title": "Per Page"
          },
          "order_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": "relevant",
            "title": "Order By"
          },
          "color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Color"
          },
          "orientation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Orientation"
          }
        },
        "required": [
          "query"
        ],
        "title": "search_photosArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_photos": [
      {
        "case_name": "Basic Photo Search",
        "purpose": "验证基本搜索功能是否正常工作，使用默认参数搜索关键词 'nature'",
        "args": {
          "query": "nature"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"IicyiaPYGGI\",\n    \"description\": \"orange flowers\",\n    \"width\": 4928,\n    \"height\": 3264,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1465146344425-f00d5f5c8f07\"\n    }\n  },\n  {\n    \"id\": \"EwKXn5CapA4\",\n    \"description\": \"Finding my roots\",\n    \"width\": 3648,\n    \"height\": 5472,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1518495973542-4542c06a5843?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHxu...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13297字符，剩余11797字符"
        },
        "execution_time": 0.8923914432525635,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Custom Page and Per Page",
        "purpose": "测试分页功能，指定 page=2 和 per_page=5",
        "args": {
          "query": "mountains",
          "page": 2,
          "per_page": 5
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"3i5PHVp1Fkw\",\n    \"description\": \"TH\\u039e MISTY MOUNT\\u039bINS This is a composite of 5 images edited in \\u039bdobe Photoshop & Nik Software.\",\n    \"width\": 4000,\n    \"height\": 6000,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1570641963303-92ce4845ed4c\"\n    }\n  },\n  {\n    \"id\": \"g30P1zcOzXo\",\n    \"description\": \"Taken from the top of Poon Hill before sun rise\",\n    \"width\": 4928,\n ...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计6796字符，剩余5296字符"
        },
        "execution_time": 0.17421746253967285,
        "is_functional_test": true
      },
      {
        "case_name": "Sort Results by Latest",
        "purpose": "验证排序功能，按最新结果排序",
        "args": {
          "query": "technology",
          "order_by": "latest"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"F4ottWBnCpM\",\n    \"description\": \"a laptop computer sitting on top of a white table\",\n    \"width\": 8256,\n    \"height\": 5504,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1648737966636-2fc3a5fffc8a\"\n    }\n  },\n  {\n    \"id\": \"DCq3Lfkkpjo\",\n    \"description\": \"A bullet train waits at a station platform.\",\n    \"width\": 3947,\n    \"height\": 5920,\n    \"urls\": {\n      \"raw\": \"h...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13766字符，剩余12266字符"
        },
        "execution_time": 0.1750483512878418,
        "is_functional_test": true
      },
      {
        "case_name": "Filter by Color Black and White",
        "purpose": "验证颜色过滤器 'black_and_white' 是否生效",
        "args": {
          "query": "portrait",
          "color": "black_and_white"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"0fN7Fxv1eWA\",\n    \"description\": \"grayscale photo of woman wearing necklace and top\",\n    \"width\": 3813,\n    \"height\": 2975,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1506863530036-1efeddceb993?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdHxlbnwwfHx8YmxhY2tfYW5kX3doaXRlfDE3NTIzMjQyMjh8MA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1506863530036-1efeddceb993?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdHxlbnwwfHx8YmxhY2tfYW5kX3doaXRlfDE3NTIzMjQyMjh8MA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1506863530036-1efeddceb993?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdHxlbnwwfHx8YmxhY2tfYW5kX3doaXRlfDE3NTIzMjQyMjh8MA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1506863530036-1efeddceb993?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdHxlbnwwfHx8YmxhY2tfYW5kX3doaXRlfDE3NTIzMjQyMjh8MA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1506863530036-1efeddceb993?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdHxlbnwwfHx8YmxhY2tfYW5kX3doaXRlfDE3NTIzMjQyMjh8MA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1506863530036-1efeddceb993\"\n    }\n  },\n  {\n    \"id\": \"XHVpWcr5grQ\",\n    \"description\": \"Daza\",\n    \"width\": 3220,\n    \"hei...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计14001字符，剩余12501字符"
        },
        "execution_time": 0.17832303047180176,
        "is_functional_test": true
      },
      {
        "case_name": "Filter by Orientation Portrait",
        "purpose": "验证方向过滤器 'portrait' 是否正确应用",
        "args": {
          "query": "people",
          "orientation": "portrait"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"X53e51WfjlE\",\n    \"description\": \"cross\",\n    \"width\": 4016,\n    \"height\": 6016,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1513682121497-80211f36a7d3\"\n    }\n  },\n  {\n    \"id\": \"mEZ3PoFGs_k\",\n    \"description\": \"Happy daughter\",\n    \"width\": 3744,\n    \"height\": 5616,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHxwZW9wbG...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计12797字符，剩余11297字符"
        },
        "execution_time": 0.6069104671478271,
        "is_functional_test": true
      },
      {
        "case_name": "Invalid Order By Value",
        "purpose": "测试无效的 order_by 参数是否被正确拒绝",
        "args": {
          "query": "cars",
          "order_by": "invalid_order"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: order_by must be 'latest' or 'relevant'."
        },
        "execution_time": 0.004000663757324219,
        "is_functional_test": false
      },
      {
        "case_name": "Per Page Exceeds Maximum Limit",
        "purpose": "验证 per_page 超出最大限制（30）时是否抛出错误",
        "args": {
          "query": "animals",
          "per_page": 31
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: per_page must be between 1 and 30."
        },
        "execution_time": 0.003999948501586914,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Query",
        "purpose": "测试包含特殊字符的查询是否能被正确处理",
        "args": {
          "query": "!@#$%^&*()_+{}[]|\":,./<>?"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"IJabYCfWp0Y\",\n    \"description\": \"A yacht named It\\u2019s A Sin\",\n    \"width\": 3032,\n    \"height\": 2026,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1618343383965-1b90d0cb50e7?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlMjElNDAlMjMlMjQlMjUlNUUlMjYqJTI4JTI5XyUyQiU3QiU3RCU1QiU1RCU3QyUyMiUzQSUyQy4lMkYlM0MlM0UlM0Z8ZW58MHx8fHwxNzUyMzQ2NjM1fDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1618343383965-1b90d0cb50e7?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlMjElNDAlMjMlMjQlMjUlNUUlMjYqJTI4JTI5XyUyQiU3QiU3RCU1QiU1RCU3QyUyMiUzQSUyQy4lMkYlM0MlM0UlM0Z8ZW58MHx8fHwxNzUyMzQ2NjM1fDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1618343383965-1b90d0cb50e7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlMjElNDAlMjMlMjQlMjUlNUUlMjYqJTI4JTI5XyUyQiU3QiU3RCU1QiU1RCU3QyUyMiUzQSUyQy4lMkYlM0MlM0UlM0Z8ZW58MHx8fHwxNzUyMzQ2NjM1fDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1618343383965-1b90d0cb50e7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlMjElNDAlMjMlMjQlMjUlNUUlMjYqJTI4JTI5XyUyQiU3QiU3RCU1QiU1RCU3QyUyMiUzQSUyQy4lMkYlM0MlM0UlM0Z8ZW58MHx8fHwxNzUyMzQ2NjM1fDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1618343383965-1b90d0cb50e7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHwlMjElNDAlMjMlMjQlMjUlNUUlMjYqJTI4JTI5XyUyQiU3QiU3RCU1QiU1RCU3QyUyMiUzQSU...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计17494字符，剩余15994字符"
        },
        "execution_time": 0.8602375984191895,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 8
}