{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "qwen-max-latest-mcp_zotero_manager",
  "server_path": "workspace/pipeline-output-servers/qwen-max-latest/mcp_zotero_manager/refined/server.py",
  "timestamp": "2025-07-14T21:57:18.271615",
  "tools": [
    {
      "name": "get_item_metadata",
      "description": "\n    Fetches the detailed metadata of a specified Zotero item using its unique item key.\n\n    Args:\n        item_key: The unique identifier for the Zotero item whose metadata is to be fetched.\n\n    Returns:\n        A JSON string containing the detailed metadata of the specified Zotero item.\n\n    Raises:\n        ValueError: If the `item_key` is not provided or is invalid.\n        requests.exceptions.HTTPError: If the request to the Zotero API fails.\n\n    Example:\n        get_item_metadata(item_key=\"ABC123XYZ\")\n    ",
      "args_schema": {
        "properties": {
          "item_key": {
            "title": "Item Key",
            "type": "string"
          }
        },
        "required": [
          "item_key"
        ],
        "title": "get_item_metadataArguments",
        "type": "object"
      }
    },
    {
      "name": "get_item_fulltext",
      "description": "\n    Extracts the full text content of a specified Zotero item using its unique item key.\n\n    Args:\n        item_key: The unique identifier for the Zotero item whose full text content is to be extracted.\n\n    Returns:\n        A JSON string containing the full text content of the specified Zotero item.\n\n    Raises:\n        ValueError: If the `item_key` is not provided or is invalid.\n        requests.exceptions.HTTPError: If the request to the Zotero API fails.\n\n    Example:\n        get_item_fulltext(item_key=\"ABC123XYZ\")\n    ",
      "args_schema": {
        "properties": {
          "item_key": {
            "title": "Item Key",
            "type": "string"
          }
        },
        "required": [
          "item_key"
        ],
        "title": "get_item_fulltextArguments",
        "type": "object"
      }
    },
    {
      "name": "search_items",
      "description": "\n    Searches the Zotero library flexibly based on title, creator, year, or full text and returns a formatted list of search results.\n\n    Args:\n        query: The search query text.\n        search_by_title: Whether to include titles in the search. Defaults to True.\n        search_by_creator: Whether to include creators in the search. Defaults to True.\n        search_by_year: Whether to include publication years in the search. Defaults to False.\n        search_by_fulltext: Whether to include full text in the search. Defaults to False.\n\n    Returns:\n        A JSON string containing a list of dictionaries where each dictionary contains the metadata of an item that matches the search criteria.\n\n    Raises:\n        ValueError: If the `query` is not provided or is invalid.\n        requests.exceptions.HTTPError: If the request to the Zotero API fails.\n\n    Example:\n        search_items(query=\"Machine Learning\", search_by_title=True, search_by_creator=True, search_by_year=False, search_by_fulltext=False)\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "search_by_title": {
            "default": true,
            "title": "Search By Title",
            "type": "boolean"
          },
          "search_by_creator": {
            "default": true,
            "title": "Search By Creator",
            "type": "boolean"
          },
          "search_by_year": {
            "default": false,
            "title": "Search By Year",
            "type": "boolean"
          },
          "search_by_fulltext": {
            "default": false,
            "title": "Search By Fulltext",
            "type": "boolean"
          }
        },
        "required": [
          "query"
        ],
        "title": "search_itemsArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "get_item_metadata": [
      {
        "case_name": "基本功能测试 - 获取有效Zotero条目元数据",
        "purpose": "验证工具能够成功获取一个有效的Zotero条目的详细元数据。",
        "args": {
          "item_key": "ABC123XYZ"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/ABC123XYZ"
        },
        "execution_time": 1.4249022006988525,
        "is_functional_test": true
      },
      {
        "case_name": "错误处理测试 - 未提供item_key参数",
        "purpose": "验证当未提供必需的item_key参数时，工具是否正确抛出ValueError。",
        "args": {},
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: 1 validation error for get_item_metadataArguments\nitem_key\n  Field required [type=missing, input_value={}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing"
        },
        "execution_time": 0.004004955291748047,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 提供无效的item_key",
        "purpose": "验证当提供格式不正确的item_key时，工具是否正确抛出ValueError。",
        "args": {
          "item_key": "invalid_key_123"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/invalid_key_123"
        },
        "execution_time": 1.384861946105957,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - item_key包含特殊字符",
        "purpose": "验证工具是否能正确处理包含特殊字符的item_key（如符号、空格等）。",
        "args": {
          "item_key": "SPE@#%&_!KEY"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/SPE@#%25&_!KEY"
        },
        "execution_time": 1.3748893737792969,
        "is_functional_test": false
      },
      {
        "case_name": "安全性测试 - 尝试注入恶意字符串作为item_key",
        "purpose": "验证工具是否对输入进行适当清理或拒绝执行以防止潜在注入攻击。",
        "args": {
          "item_key": "'; DROP TABLE items;--"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/';%20DROP%20TABLE%20items;--"
        },
        "execution_time": 1.4209277629852295,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - Zotero API请求失败模拟",
        "purpose": "验证当Zotero API返回HTTP错误时，工具是否能正确捕获并抛出HTTPError异常。",
        "args": {
          "item_key": "FAKE456ERROR"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/FAKE456ERROR"
        },
        "execution_time": 1.4143309593200684,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 最小长度item_key",
        "purpose": "验证工具是否支持最小长度的item_key（假设为1个字符）。",
        "args": {
          "item_key": "A"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/A"
        },
        "execution_time": 1.4287028312683105,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 最大长度item_key",
        "purpose": "验证工具是否支持最大允许长度的item_key（假设为20个字符）。",
        "args": {
          "item_key": "ABCDEFGHIJKLMNOPQRST"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_metadata: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/ABCDEFGHIJKLMNOPQRST"
        },
        "execution_time": 1.3857362270355225,
        "is_functional_test": false
      }
    ],
    "get_item_fulltext": [
      {
        "case_name": "基本功能测试 - 获取有效Zotero条目的全文内容",
        "purpose": "验证工具能够成功获取一个有效的Zotero条目的全文内容。",
        "args": {
          "item_key": "ABC123XYZ"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/ABC123XYZ/fulltext"
        },
        "execution_time": 1.4013822078704834,
        "is_functional_test": true
      },
      {
        "case_name": "错误处理测试 - 未提供item_key参数",
        "purpose": "验证当未提供必需的item_key参数时，工具是否正确抛出ValueError。",
        "args": {},
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: 1 validation error for get_item_fulltextArguments\nitem_key\n  Field required [type=missing, input_value={}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 提供无效的item_key",
        "purpose": "验证当提供格式不正确的item_key时，工具是否正确抛出ValueError或HTTPError。",
        "args": {
          "item_key": "invalid_key_123"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/invalid_key_123/fulltext"
        },
        "execution_time": 1.3831040859222412,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - item_key包含特殊字符",
        "purpose": "验证工具是否能正确处理包含特殊字符的item_key（如符号、空格等）。",
        "args": {
          "item_key": "SPE@#%&_!KEY"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/SPE@#%25&_!KEY/fulltext"
        },
        "execution_time": 1.6891684532165527,
        "is_functional_test": false
      },
      {
        "case_name": "安全性测试 - 尝试注入恶意字符串作为item_key",
        "purpose": "验证工具是否对输入进行适当清理或拒绝执行以防止潜在注入攻击。",
        "args": {
          "item_key": "'; DROP TABLE items;--"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/';%20DROP%20TABLE%20items;--/fulltext"
        },
        "execution_time": 1.4100019931793213,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - Zotero API请求失败模拟",
        "purpose": "验证当Zotero API返回HTTP错误时，工具是否能正确捕获并抛出HTTPError异常。",
        "args": {
          "item_key": "FAKE456ERROR"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/FAKE456ERROR/fulltext"
        },
        "execution_time": 1.379650354385376,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 最小长度item_key",
        "purpose": "验证工具是否支持最小长度的item_key（假设为1个字符）。",
        "args": {
          "item_key": "A"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/A/fulltext"
        },
        "execution_time": 1.3525848388671875,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 最大长度item_key",
        "purpose": "验证工具是否支持最大允许长度的item_key（假设为20个字符）。",
        "args": {
          "item_key": "ABCDEFGHIJKLMNOPQRST"
        },
        "response": {
          "error": "ToolException: Error executing tool get_item_fulltext: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items/ABCDEFGHIJKLMNOPQRST/fulltext"
        },
        "execution_time": 1.371387243270874,
        "is_functional_test": false
      }
    ],
    "search_items": [
      {
        "case_name": "基本功能测试 - 按标题和作者搜索有效关键词",
        "purpose": "验证工具能够使用默认参数（仅标题和作者）成功执行搜索并返回结果。",
        "args": {
          "query": "Machine Learning"
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items?q=Machine+Learning&qmode=titleCreatorYear&include=data"
        },
        "execution_time": 1.4100456237792969,
        "is_functional_test": true
      },
      {
        "case_name": "基本功能测试 - 启用年份和全文本搜索",
        "purpose": "验证工具在启用年份和全文本搜索时能正确处理多维度查询。",
        "args": {
          "query": "Neural Networks",
          "search_by_title": true,
          "search_by_creator": false,
          "search_by_year": true,
          "search_by_fulltext": true
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items?q=Neural+Networks&qmode=everything&include=data"
        },
        "execution_time": 1.3684978485107422,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - SQL注入尝试作为查询内容",
        "purpose": "验证工具是否对输入进行适当清理或拒绝执行以防止潜在SQL注入攻击。",
        "args": {
          "query": "'; DROP TABLE items;--"
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items?q=%27%3B+DROP+TABLE+items%3B--&qmode=titleCreatorYear&include=data"
        },
        "execution_time": 1.3608417510986328,
        "is_functional_test": false
      },
      {
        "case_name": "安全性测试 - 跨站脚本(XSS)注入尝试",
        "purpose": "验证工具是否安全处理包含HTML/JS标签的查询字符串，防止XSS攻击。",
        "args": {
          "query": "<script>alert('xss')</script>"
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items?q=%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&qmode=titleCreatorYear&include=data"
        },
        "execution_time": 1.4360523223876953,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 未提供查询参数",
        "purpose": "验证当未提供必需的query参数时，工具是否正确抛出ValueError。",
        "args": {},
        "response": {
          "error": "ToolException: Error executing tool search_items: 1 validation error for search_itemsArguments\nquery\n  Field required [type=missing, input_value={}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.10/v/missing"
        },
        "execution_time": 0.003000020980834961,
        "is_functional_test": false
      },
      {
        "case_name": "错误处理测试 - 提供空字符串作为查询",
        "purpose": "验证当提供空字符串作为查询内容时，工具是否能正确识别为无效输入并抛出异常。",
        "args": {
          "query": ""
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: 'query' must be a non-empty string."
        },
        "execution_time": 0.0030012130737304688,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 查询包含特殊字符",
        "purpose": "验证工具是否能正确处理包含特殊字符的查询字符串（如符号、空格等）。",
        "args": {
          "query": "Quantum@Computing!2023"
        },
        "response": {
          "error": "ToolException: Error executing tool search_items: Request failed: 404 Client Error: Not Found for url: https://api.zotero.org/user/16026771/items?q=Quantum%40Computing%212023&qmode=titleCreatorYear&include=data"
        },
        "execution_time": 1.3622124195098877,
        "is_functional_test": false
      }
    ]
  },
  "total_cases": 23
}