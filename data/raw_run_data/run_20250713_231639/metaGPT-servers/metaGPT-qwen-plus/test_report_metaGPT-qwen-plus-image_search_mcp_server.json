{
  "server_name": "image_search_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-image_search_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\image_search_mcp_server.py",
  "timestamp": "2025-07-13T23:16:42.036418",
  "tools": [
    {
      "name": "search_images",
      "description": "\n    根据关键词在指定图片源中检索图片。\n\n    Args:\n        keyword: 搜索关键词。\n        source: 图片源（unsplash, pexels, pixabay）。\n\n    Returns:\n        包含图片链接、作者等信息的JSON字符串。\n\n    Raises:\n        ValueError: 如果图片源无效。\n        httpx.HTTPStatusError: 如果API请求失败。\n    ",
      "args_schema": {
        "properties": {
          "keyword": {
            "title": "Keyword",
            "type": "string"
          },
          "source": {
            "default": "unsplash",
            "title": "Source",
            "type": "string"
          }
        },
        "required": [
          "keyword"
        ],
        "title": "search_imagesArguments",
        "type": "object"
      }
    },
    {
      "name": "download_image",
      "description": "\n    下载并保存指定URL的图片。\n\n    Args:\n        url: 图片URL。\n        filename: 保存的文件名。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        httpx.HTTPStatusError: 如果图片下载失败。\n    ",
      "args_schema": {
        "properties": {
          "url": {
            "title": "Url",
            "type": "string"
          },
          "filename": {
            "title": "Filename",
            "type": "string"
          }
        },
        "required": [
          "url",
          "filename"
        ],
        "title": "download_imageArguments",
        "type": "object"
      }
    },
    {
      "name": "generate_icon",
      "description": "\n    根据描述生成指定尺寸的图标。\n\n    Args:\n        description: 图标描述。\n        size: 图标尺寸，默认为64。\n\n    Returns:\n        包含保存状态和路径的JSON字符串。\n\n    Raises:\n        ValueError: 如果尺寸小于16或大于256。\n    ",
      "args_schema": {
        "properties": {
          "description": {
            "title": "Description",
            "type": "string"
          },
          "size": {
            "default": 64,
            "title": "Size",
            "type": "integer"
          }
        },
        "required": [
          "description"
        ],
        "title": "generate_iconArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_images": [
      {
        "case_name": "Basic Image Search with Default Source",
        "purpose": "验证工具在使用默认图片源（unsplash）和有效关键词时是否能正常搜索图片",
        "args": {
          "keyword": "nature"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=nature&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.6787333488464355,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search from Pexels",
        "purpose": "验证工具能否从指定的Pexels图片源中正确搜索图片",
        "args": {
          "keyword": "technology",
          "source": "pexels"
        },
        "response": {
          "result": "{\"page\":1,\"per_page\":5,\"photos\":[{\"id\":546819,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels.com/photo/close-up-photo-of-programming-of-codes-546819/\",\"photographer\":\"luis gomes\",\"photographer_url\":\"https://www.pexels.com/@luis-gomes-166706\",\"photographer_id\":166706,\"avg_color\":\"#282C44\",\"src\":{\"original\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg\",\"large2x\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=2\\u0026h=650\\u0026w=940\",\"large\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=650\\u0026w=940\",\"medium\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=350\",\"small\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=130\",\"portrait\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=1200\\u0026w=800\",\"landscape\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=627\\u0026w=1200\",\"tiny\":\"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=1\\u0026fit=crop\\u0026h=200\\u0026w=280\"},\"liked\":false,\"alt\":\"Close-up of a computer screen displaying programming code in a dark environment.\"},{\"id\":356056,\"width\":4288,\"height\":2848,\"url\":\"https://www.pexels....[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计7325字符，剩余5825字符"
        },
        "execution_time": 1.9017868041992188,
        "is_functional_test": true
      },
      {
        "case_name": "Image Search from Pixabay",
        "purpose": "验证工具能否从Pixabay图片源中成功检索图片",
        "args": {
          "keyword": "animals",
          "source": "pixabay"
        },
        "response": {
          "result": "{\"total\":1479179,\"totalHits\":500,\"hits\":[{\"id\":9704301,\"pageURL\":\"https://pixabay.com/photos/wheat-cereal-ear-seeds-field-9704301/\",\"type\":\"photo\",\"tags\":\"wheat, cereal, ear, seeds, field, village, rural, growth, nature, agriculture, farm, food\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/09/10/09/wheat-9704301_150.jpg\",\"previewWidth\":150,\"previewHeight\":100,\"webformatURL\":\"https://pixabay.com/get/gbf199ca4145b79a17f14a057338ff6b2dc04be7ebe25df326731218d83a6d66fafe5d4cb7c57bd99db2176dbfde3e04bbb2cd32c60d2d8380f59e21045a89a8a_640.jpg\",\"webformatWidth\":640,\"webformatHeight\":427,\"largeImageURL\":\"https://pixabay.com/get/g307fa11b9bf02b24948a29bcf75923c87e52385bc2c77b4a70558558246057cfd286db76551e342593e892244183167f1085d57024bee4a1d3af7f1029fde53b_1280.jpg\",\"imageWidth\":6000,\"imageHeight\":4000,\"imageSize\":4550930,\"views\":1806,\"downloads\":1420,\"collections\":3,\"likes\":57,\"comments\":25,\"user_id\":9363663,\"user\":\"Nowaja\",\"userImageURL\":\"https://cdn.pixabay.com/user/2020/09/15/15-16-12-52_250x250.jpg\",\"noAiTraining\":false,\"isAiGenerated\":false,\"isGRated\":true,\"isLowQuality\":0,\"userURL\":\"https://pixabay.com/users/9363663/\"},{\"id\":9702173,\"pageURL\":\"https://pixabay.com/photos/eastern-yellow-robin-yellow-robin-9702173/\",\"type\":\"photo\",\"tags\":\"eastern yellow robin, yellow robin, robin, bird, eopsaltria australis, wildlife, wild, nature, avian, birdwatching, plumage, feathers, australia, australian bush\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/08/07/01/eastern-yellow-rob...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计5792字符，剩余4292字符"
        },
        "execution_time": 1.4659268856048584,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Keyword Handling",
        "purpose": "测试工具对空关键词的处理是否符合预期（允许空值或返回错误）",
        "args": {
          "keyword": "",
          "source": "unsplash"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.6365315914154053,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Source Handling",
        "purpose": "验证工具是否能正确抛出异常，当提供无效图片源时",
        "args": {
          "keyword": "mountains",
          "source": "invalid_source"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: 无效的图片源: invalid_source"
        },
        "execution_time": 0.01000070571899414,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Keyword",
        "purpose": "测试工具是否能正确处理包含特殊字符的搜索关键词",
        "args": {
          "keyword": "sun@beach!123",
          "source": "pexels"
        },
        "response": {
          "result": "{\"page\":1,\"per_page\":5,\"photos\":[{\"id\":30757879,\"width\":3549,\"height\":5324,\"url\":\"https://www.pexels.com/photo/woman-relaxing-by-poolside-on-sunny-day-30757879/\",\"photographer\":\"Aleksandr Sochnev\",\"photographer_url\":\"https://www.pexels.com/@aleksandr-sochnev-2149104692\",\"photographer_id\":2149104692,\"avg_color\":\"#77A7AB\",\"src\":{\"original\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg\",\"large2x\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=2\\u0026h=650\\u0026w=940\",\"large\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=650\\u0026w=940\",\"medium\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=350\",\"small\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026h=130\",\"portrait\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=1200\\u0026w=800\",\"landscape\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026fit=crop\\u0026h=627\\u0026w=1200\",\"tiny\":\"https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg?auto=compress\\u0026cs=tinysrgb\\u0026dpr=1\\u0026fit=crop\\u0026h=200\\u0026w=280\"},\"liked\":false,\"alt\":\"\"},{\"id\":32947332,\"width\":5024,\"height\":2823,\"url\":\"https://www.pexels.com/photo/aerial-vi...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计7060字符，剩余5560字符"
        },
        "execution_time": 1.7825202941894531,
        "is_functional_test": true
      },
      {
        "case_name": "Long Keyword Input",
        "purpose": "验证工具是否能处理较长的关键词字符串并返回合理结果",
        "args": {
          "keyword": "A beautiful landscape with mountains, rivers and green forests during sunset",
          "source": "pixabay"
        },
        "response": {
          "result": "{\"total\":1479179,\"totalHits\":500,\"hits\":[{\"id\":9704301,\"pageURL\":\"https://pixabay.com/photos/wheat-cereal-ear-seeds-field-9704301/\",\"type\":\"photo\",\"tags\":\"wheat, cereal, ear, seeds, field, village, rural, growth, nature, agriculture, farm, food\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/09/10/09/wheat-9704301_150.jpg\",\"previewWidth\":150,\"previewHeight\":100,\"webformatURL\":\"https://pixabay.com/get/gdf7e29db6e35b9c72e583afe2383234f6157a5cdfcd5b8f758f35919839404d35472668746e7f011dd4ae015957a5a1c717ec077b59578d689f0a6e1835b0255_640.jpg\",\"webformatWidth\":640,\"webformatHeight\":427,\"largeImageURL\":\"https://pixabay.com/get/ga37137dfc2e256d5983e39f613833040af0ee61832e796576697fb987f5674db831f303589d61c518aee493bb05148d1a5da90ffdd0f0991cb4b230e01a06f5a_1280.jpg\",\"imageWidth\":6000,\"imageHeight\":4000,\"imageSize\":4550930,\"views\":1806,\"downloads\":1420,\"collections\":3,\"likes\":57,\"comments\":25,\"user_id\":9363663,\"user\":\"Nowaja\",\"userImageURL\":\"https://cdn.pixabay.com/user/2020/09/15/15-16-12-52_250x250.jpg\",\"noAiTraining\":false,\"isAiGenerated\":false,\"isGRated\":true,\"isLowQuality\":0,\"userURL\":\"https://pixabay.com/users/9363663/\"},{\"id\":9702173,\"pageURL\":\"https://pixabay.com/photos/eastern-yellow-robin-yellow-robin-9702173/\",\"type\":\"photo\",\"tags\":\"eastern yellow robin, yellow robin, robin, bird, eopsaltria australis, wildlife, wild, nature, avian, birdwatching, plumage, feathers, australia, australian bush\",\"previewURL\":\"https://cdn.pixabay.com/photo/2025/07/08/07/01/eastern-yellow-rob...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计5792字符，剩余4292字符"
        },
        "execution_time": 1.5421831607818604,
        "is_functional_test": true
      },
      {
        "case_name": "XSS Attempt via Keyword",
        "purpose": "测试工具是否能安全地处理可能的跨站脚本攻击尝试",
        "args": {
          "keyword": "<script>alert('xss')</script>",
          "source": "unsplash"
        },
        "response": {
          "error": "ToolException: Error executing tool search_images: Client error '401 Unauthorized' for url 'https://api.unsplash.com/search/photos?query=%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&per_page=5'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"
        },
        "execution_time": 1.5754420757293701,
        "is_functional_test": false
      }
    ],
    "download_image": [
      {
        "case_name": "Basic Image Download",
        "purpose": "验证工具能否成功从有效URL下载图片并保存为指定文件名",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": "downloaded_image.jpeg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\downloaded_image.jpeg\"}"
        },
        "execution_time": 1.6614909172058105,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image with Special Characters in Filename",
        "purpose": "测试工具是否能处理包含特殊字符的文件名",
        "args": {
          "url": "https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg",
          "filename": "image@with#special&chars.png"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: "
        },
        "execution_time": 5.464890718460083,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image to Existing File",
        "purpose": "验证工具在目标文件已存在时是否能覆盖写入",
        "args": {
          "url": "https://pixabay.com/get/gbf199ca4145b79a17f14a057338ff6b2dc04be7ebe25df326731218d83a6d66fafe5d4cb7c57bd99db2176dbfde3e04bbb2cd32c60d2d8380f59e21045a89a8a_640.jpg",
          "filename": "nature_converted.jpeg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\nature_converted.jpeg\"}"
        },
        "execution_time": 1.9568159580230713,
        "is_functional_test": true
      },
      {
        "case_name": "Download from Invalid URL",
        "purpose": "验证工具在提供无效图片URL时是否抛出HTTP错误",
        "args": {
          "url": "https://example.com/invalid/image.png",
          "filename": "error_image.png"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: "
        },
        "execution_time": 5.424395322799683,
        "is_functional_test": false
      },
      {
        "case_name": "Download with Empty Filename",
        "purpose": "测试工具是否能正确处理空文件名输入",
        "args": {
          "url": "https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg",
          "filename": ""
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: [Errno 2] No such file or directory: './images\\\\'"
        },
        "execution_time": 1.7021982669830322,
        "is_functional_test": false
      },
      {
        "case_name": "XSS Attempt via Filename",
        "purpose": "测试工具是否能安全地处理可能的跨站脚本攻击尝试（通过文件名）",
        "args": {
          "url": "https://images.pexels.com/photos/30757879/pexels-photo-30757879.jpeg",
          "filename": "<script>alert('xss')</script>.png"
        },
        "response": {
          "error": "ToolException: Error executing tool download_image: [Errno 22] Invalid argument: \"./images\\\\<script>alert('xss')</script>.png\""
        },
        "execution_time": 1.8278541564941406,
        "is_functional_test": false
      },
      {
        "case_name": "Download Large Image",
        "purpose": "验证工具是否能处理较大尺寸图片的下载",
        "args": {
          "url": "https://pixabay.com/get/ga37137dfc2e256d5983e39f613833040af0ee61832e796576697fb987f5674db831f303589d61c518aee493bb05148d1a5da90ffdd0f0991cb4b230e01a06f5a_1280.jpg",
          "filename": "large_image.jpg"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\large_image.jpg\"}"
        },
        "execution_time": 2.509713888168335,
        "is_functional_test": true
      },
      {
        "case_name": "Download Image with Long Filename",
        "purpose": "验证工具是否能处理超长文件名的情况",
        "args": {
          "url": "https://images.pexels.com/photos/32947332/pexels-photo-32947332.jpeg",
          "filename": "very_long_filename_that_exceeds_normal_length_requirements_for_image_download_functionality_testing_purpose_only.png"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\very_long_filename_that_exceeds_normal_length_requirements_for_image_download_functionality_testing_purpose_only.png\"}"
        },
        "execution_time": 8.536002397537231,
        "is_functional_test": true
      }
    ],
    "generate_icon": [
      {
        "case_name": "Basic Icon Generation with Default Size",
        "purpose": "验证工具在提供有效描述和默认尺寸时能否正常生成图标",
        "args": {
          "description": "a red apple on white background"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_a_red_apple_on_white_background_64x64.png\"}"
        },
        "execution_time": 0.006000518798828125,
        "is_functional_test": true
      },
      {
        "case_name": "Icon Generation with Custom Size",
        "purpose": "验证工具在提供有效描述和自定义尺寸（64~256之间）时是否能正确生成对应尺寸的图标",
        "args": {
          "description": "mountain landscape at sunset",
          "size": 128
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_mountain_landscape_at_sunset_128x128.png\"}"
        },
        "execution_time": 0.005001068115234375,
        "is_functional_test": true
      },
      {
        "case_name": "XSS Attempt via Description",
        "purpose": "测试工具是否能安全地处理可能包含跨站脚本攻击的描述输入",
        "args": {
          "description": "<script>alert('xss')</script>"
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: [Errno 22] Invalid argument: \"./images\\\\icon_<script>alert('xss')</script>_64x64.png\""
        },
        "execution_time": 0.009570837020874023,
        "is_functional_test": false
      },
      {
        "case_name": "Size Below Minimum Limit",
        "purpose": "验证工具是否能正确抛出异常，当提供的尺寸小于最小限制（16）时",
        "args": {
          "description": "technology icon",
          "size": 15
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 15. 有效范围是16到256。"
        },
        "execution_time": 0.003998994827270508,
        "is_functional_test": false
      },
      {
        "case_name": "Size Above Maximum Limit",
        "purpose": "验证工具是否能正确抛出异常，当提供的尺寸超过最大限制（256）时",
        "args": {
          "description": "nature icon",
          "size": 257
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: 尺寸超出范围: 257. 有效范围是16到256。"
        },
        "execution_time": 0.009002208709716797,
        "is_functional_test": false
      },
      {
        "case_name": "Empty Description Handling",
        "purpose": "测试工具是否能正确处理空描述输入的情况",
        "args": {
          "description": ""
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon__64x64.png\"}"
        },
        "execution_time": 0.003998994827270508,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters in Description",
        "purpose": "验证工具是否能正确处理包含特殊字符的图标描述",
        "args": {
          "description": "settings @#&()_+!<>[]{}"
        },
        "response": {
          "error": "ToolException: Error executing tool generate_icon: [Errno 22] Invalid argument: './images\\\\icon_settings_@#&()_+!<>[]{}_64x64.png'"
        },
        "execution_time": 0.005000591278076172,
        "is_functional_test": true
      },
      {
        "case_name": "Long Description Input",
        "purpose": "测试工具是否能处理较长的图标描述并生成合理结果",
        "args": {
          "description": "A highly detailed icon showing a futuristic city skyline at night with neon lights and flying vehicles"
        },
        "response": {
          "result": "{\"status\": \"success\", \"path\": \"./images\\icon_a_highly_detailed_icon_showing_a_futuristic_city_skyline_at_night_with_neon_lights_and_flying_vehicles_64x64.png\"}"
        },
        "execution_time": 0.00899958610534668,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 24
}