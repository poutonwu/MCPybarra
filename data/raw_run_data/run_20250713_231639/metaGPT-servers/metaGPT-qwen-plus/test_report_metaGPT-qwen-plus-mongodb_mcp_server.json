{
  "server_name": "mongodb_mcp_server",
  "parent_dir": "metaGPT-qwen-plus",
  "report_name": "metaGPT-qwen-plus-mongodb_mcp_server",
  "server_path": "workspace\\metaGPT-servers\\metaGPT-qwen-plus\\mongodb_mcp_server.py",
  "timestamp": "2025-07-13T23:16:46.255404",
  "tools": [
    {
      "name": "mcp_list_databases",
      "description": "\n    列出MongoDB服务器上的所有数据库。\n\n    Returns:\n        一个包含数据库名称列表的JSON字符串。\n    \n    Raises:\n        OperationFailure: 如果获取数据库列表时发生错误。\n    ",
      "args_schema": {
        "properties": {},
        "title": "mcp_list_databasesArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_list_collections",
      "description": "\n    列出指定数据库中的所有集合。\n\n    Args:\n        database_name: 要列出集合的数据库名称 (必填)。\n\n    Returns:\n        一个包含集合名称列表的JSON字符串。\n    \n    Raises:\n        ValueError: 如果数据库名称为空或空白字符。\n        OperationFailure: 如果获取集合列表时发生错误。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          }
        },
        "required": [
          "database_name"
        ],
        "title": "mcp_list_collectionsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_insert_document",
      "description": "\n    向指定数据库和集合中插入新文档。\n\n    Args:\n        database_name: 要插入文档的数据库名称 (必填)。\n        collection_name: 要插入文档的集合名称 (必填)。\n        document: 要插入的文档数据 (必填)，以字典形式提供。\n\n    Returns:\n        一个字符串，表示插入成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称为空，或者文档不是字典类型。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "document": {
            "title": "Document",
            "type": "object"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "document"
        ],
        "title": "mcp_insert_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_find_documents",
      "description": "\n    在指定数据库和集合中查询符合条件的文档。\n\n    Args:\n        database_name: 要查询的数据库名称 (必填)。\n        collection_name: 要查询的集合名称 (必填)。\n        query: 查询条件 (必填)，以字典形式提供。\n        projection: 投影参数 (可选)，指定要返回的字段。\n        limit: 限制返回结果数量 (可选)，0表示无限制。\n\n    Returns:\n        一个包含查询结果的JSON字符串。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "projection": {
            "default": null,
            "title": "Projection",
            "type": "object"
          },
          "limit": {
            "default": 0,
            "title": "Limit",
            "type": "integer"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_find_documentsArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_update_document",
      "description": "\n    更新指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要更新文档的数据库名称 (必填)。\n        collection_name: 要更新文档的集合名称 (必填)。\n        query: 更新条件 (必填)，以字典形式提供。\n        update: 更新内容 (必填)，以字典形式提供。\n        multi: 是否更新多个文档 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示更新成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称、查询条件或更新内容无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "update": {
            "title": "Update",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query",
          "update"
        ],
        "title": "mcp_update_documentArguments",
        "type": "object"
      }
    },
    {
      "name": "mcp_delete_document",
      "description": "\n    删除指定数据库和集合中的文档。\n\n    Args:\n        database_name: 要删除文档的数据库名称 (必填)。\n        collection_name: 要删除文档的集合名称 (必填)。\n        query: 删除条件 (必填)，以字典形式提供。\n        multi: 是否批量删除模式 (可选)，默认为False。\n\n    Returns:\n        一个字符串，表示删除成功或失败的消息。\n\n    Raises:\n        ValueError: 如果数据库名称、集合名称或查询条件无效。\n    ",
      "args_schema": {
        "properties": {
          "database_name": {
            "title": "Database Name",
            "type": "string"
          },
          "collection_name": {
            "title": "Collection Name",
            "type": "string"
          },
          "query": {
            "title": "Query",
            "type": "object"
          },
          "multi": {
            "default": false,
            "title": "Multi",
            "type": "boolean"
          }
        },
        "required": [
          "database_name",
          "collection_name",
          "query"
        ],
        "title": "mcp_delete_documentArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "mcp_list_databases": [
      {
        "case_name": "列出所有数据库的基本功能测试",
        "purpose": "验证mcp_list_databases工具在默认参数下可以成功列出MongoDB服务器上的所有数据库。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": true
      },
      {
        "case_name": "无权限访问数据库时的错误处理测试",
        "purpose": "验证当用户没有足够权限访问数据库时，工具是否能正确抛出OperationFailure异常。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": false
      },
      {
        "case_name": "数据库连接失败时的错误处理测试",
        "purpose": "验证当MongoDB服务不可用时，工具是否能正确捕获并抛出OperationFailure异常。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.0029990673065185547,
        "is_functional_test": false
      },
      {
        "case_name": "数据库数量为零时的行为测试",
        "purpose": "验证当MongoDB中没有任何数据库存在时，工具是否能返回空列表而不报错。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.002178192138671875,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 非法访问远程数据库实例",
        "purpose": "验证工具是否限制对非本地或受保护数据库实例的非法访问尝试。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.002999544143676758,
        "is_functional_test": false
      },
      {
        "case_name": "长时间运行后列出数据库的功能稳定性测试",
        "purpose": "验证在系统长时间运行、数据库频繁增删的情况下，工具仍能稳定列出当前数据库列表。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004998922348022461,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试 - 数据库名称包含特殊字符",
        "purpose": "验证工具能否正确处理数据库名称中包含特殊字符（如空格、中文等）的情况。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.006002902984619141,
        "is_functional_test": true
      },
      {
        "case_name": "最大数据库数量压力测试",
        "purpose": "验证工具在存在大量数据库（例如1000+）时，是否仍能正常获取并返回数据库列表。",
        "args": {},
        "response": {
          "result": "{\"databases\": [\"test_db\"]}"
        },
        "execution_time": 0.004000425338745117,
        "is_functional_test": true
      }
    ],
    "mcp_list_collections": [
      {
        "case_name": "列出指定数据库中的所有集合的基本功能测试",
        "purpose": "验证mcp_list_collections工具在有效数据库名称下可以成功列出该数据库中的所有集合。",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0029993057250976562,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 非法访问远程数据库的集合列表",
        "purpose": "验证工具是否限制对非本地或受保护数据库实例的非法访问尝试，防止未经授权获取集合信息。",
        "args": {
          "database_name": "remote_protected_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.003003358840942383,
        "is_functional_test": false
      },
      {
        "case_name": "参数为空时的错误处理测试",
        "purpose": "验证当数据库名称为空字符串时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": ""
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_list_collections: 'database_name' 不能为空。"
        },
        "execution_time": 0.007007598876953125,
        "is_functional_test": false
      },
      {
        "case_name": "参数包含空白字符时的错误处理测试",
        "purpose": "验证当数据库名称仅包含空白字符（如空格、制表符）时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "   \t\n"
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_list_collections: 'database_name' 不能为空。"
        },
        "execution_time": 0.008003950119018555,
        "is_functional_test": false
      },
      {
        "case_name": "目标数据库不存在时的行为测试",
        "purpose": "验证当指定的数据库不存在时，工具是否能正确返回空列表而不报错。",
        "args": {
          "database_name": "nonexistent_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.004984378814697266,
        "is_functional_test": true
      },
      {
        "case_name": "边界条件测试 - 数据库名称包含特殊字符",
        "purpose": "验证工具能否正确处理数据库名称中包含特殊字符（如中文、空格、符号等）的情况。",
        "args": {
          "database_name": "数据库_测试!@#"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.003000020980834961,
        "is_functional_test": true
      },
      {
        "case_name": "长时间运行后获取集合列表的稳定性测试",
        "purpose": "验证在系统长时间运行、频繁操作集合的情况下，工具仍能稳定获取并返回当前集合列表。",
        "args": {
          "database_name": "test_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.0029990673065185547,
        "is_functional_test": true
      },
      {
        "case_name": "最大集合数量压力测试",
        "purpose": "验证工具在数据库存在大量集合（例如1000+）时，是否仍能正常获取并返回集合列表。",
        "args": {
          "database_name": "huge_collection_db"
        },
        "response": {
          "result": "{\"collections\": [\"test_collection\"]}"
        },
        "execution_time": 0.00599980354309082,
        "is_functional_test": true
      }
    ],
    "mcp_insert_document": [
      {
        "case_name": "插入文档的基本功能测试",
        "purpose": "验证mcp_insert_document工具在有效数据库、集合和文档参数下可以成功插入新文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": {
            "name": "测试文档",
            "value": 1
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004000425338745117,
        "is_functional_test": true
      },
      {
        "case_name": "数据库名称为空时的错误处理测试",
        "purpose": "验证当数据库名称为空字符串时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "document": {
            "name": "测试文档",
            "value": 1
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.003000020980834961,
        "is_functional_test": false
      },
      {
        "case_name": "集合名称为空时的错误处理测试",
        "purpose": "验证当集合名称为空字符串时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "document": {
            "name": "测试文档",
            "value": 1
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.006001949310302734,
        "is_functional_test": false
      },
      {
        "case_name": "文档参数不是字典类型的错误处理测试",
        "purpose": "验证当提供的文档不是一个字典类型时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "document": "这是一个字符串而不是字典"
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 1 validation error for mcp_insert_documentArguments\ndocument\n  Input should be a valid dictionary [type=dict_type, input_value='这是一个字符串而不是字典', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/dict_type"
        },
        "execution_time": 0.006013631820678711,
        "is_functional_test": false
      },
      {
        "case_name": "数据库名称包含特殊字符的边界条件测试",
        "purpose": "验证工具能否正确处理数据库名称中包含中文、空格、符号等特殊字符的情况。",
        "args": {
          "database_name": "数据库_测试!@#",
          "collection_name": "test_collection",
          "document": {
            "name": "特殊字符库测试文档",
            "value": 2
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0029997825622558594,
        "is_functional_test": true
      },
      {
        "case_name": "集合名称包含特殊字符的边界条件测试",
        "purpose": "验证工具能否正确处理集合名称中包含中文、空格、符号等特殊字符的情况。",
        "args": {
          "database_name": "test_db",
          "collection_name": "集合_测试$%^",
          "document": {
            "name": "特殊字符集合测试文档",
            "value": 3
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005002021789550781,
        "is_functional_test": true
      },
      {
        "case_name": "插入文档到不存在的数据库和集合的安全性测试",
        "purpose": "验证工具是否允许将文档插入到尚未存在的数据库和集合中（MongoDB默认行为）。",
        "args": {
          "database_name": "nonexistent_db",
          "collection_name": "nonexistent_collection",
          "document": {
            "name": "新建库集合测试文档",
            "value": 4
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_insert_document: 文档插入失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.007527828216552734,
        "is_functional_test": true
      }
    ],
    "mcp_find_documents": [
      {
        "case_name": "基本查询功能测试",
        "purpose": "验证在指定数据库和集合中可以成功执行一个简单的查询，并返回匹配的文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004002094268798828,
        "is_functional_test": true
      },
      {
        "case_name": "带投影参数的基本查询测试",
        "purpose": "验证使用projection参数时，查询结果仅包含指定字段。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "projection": {
            "field1": 1,
            "_id": 0
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004998445510864258,
        "is_functional_test": true
      },
      {
        "case_name": "带限制数量的基本查询测试",
        "purpose": "验证使用limit参数时，查询结果不会超过指定数量。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "limit": 5
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.007026195526123047,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 查询受保护数据库中的集合",
        "purpose": "验证工具是否能正确限制对非本地或受保护数据库的非法查询访问。",
        "args": {
          "database_name": "protected_db",
          "collection_name": "sensitive_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.002994060516357422,
        "is_functional_test": false
      },
      {
        "case_name": "无效数据库名称错误处理测试",
        "purpose": "验证当提供无效数据库名称时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'database_name' 不能为空。"
        },
        "execution_time": 0.004006862640380859,
        "is_functional_test": false
      },
      {
        "case_name": "无效集合名称错误处理测试",
        "purpose": "验证当提供无效集合名称时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 'collection_name' 不能为空。"
        },
        "execution_time": 0.00652003288269043,
        "is_functional_test": false
      },
      {
        "case_name": "空查询条件边界测试",
        "purpose": "验证当查询条件为空字典时，工具是否能正确返回所有文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0039997100830078125,
        "is_functional_test": true
      },
      {
        "case_name": "查询条件包含特殊字符测试",
        "purpose": "验证当查询条件中包含特殊字符（如中文、符号）时，工具是否能正确解析并执行查询。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "张三@#￥"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_find_documents: 文档查询失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.005002260208129883,
        "is_functional_test": true
      }
    ],
    "mcp_update_document": [
      {
        "case_name": "更新指定数据库和集合中符合条件的文档的基本功能测试",
        "purpose": "验证mcp_update_document工具在提供有效数据库名称、集合名称、查询条件和更新内容时，能够成功更新文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Alice"
          },
          "update": {
            "$set": {
              "age": 30
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004000186920166016,
        "is_functional_test": true
      },
      {
        "case_name": "使用multi参数更新多个文档的功能测试",
        "purpose": "验证当multi参数设置为True时，mcp_update_document工具能够更新所有符合条件的文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "status": "active"
          },
          "update": {
            "$set": {
              "status": "inactive"
            }
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003000020980834961,
        "is_functional_test": true
      },
      {
        "case_name": "安全性测试 - 非法访问受保护数据库中的文档更新操作",
        "purpose": "验证工具是否限制对非本地或受保护数据库实例的非法更新尝试，防止未经授权修改数据。",
        "args": {
          "database_name": "remote_protected_db",
          "collection_name": "secure_collection",
          "query": {
            "id": "12345"
          },
          "update": {
            "$set": {
              "data": "modified"
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004002094268798828,
        "is_functional_test": false
      },
      {
        "case_name": "数据库名称为空时的错误处理测试",
        "purpose": "验证当数据库名称为空字符串时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "name": "Alice"
          },
          "update": {
            "$set": {
              "age": 30
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.004000425338745117,
        "is_functional_test": false
      },
      {
        "case_name": "集合名称为空时的错误处理测试",
        "purpose": "验证当集合名称为空字符串时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "name": "Alice"
          },
          "update": {
            "$set": {
              "age": 30
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.006005525588989258,
        "is_functional_test": false
      },
      {
        "case_name": "查询条件为空时的错误处理测试",
        "purpose": "验证当查询条件为空字典时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {},
          "update": {
            "$set": {
              "age": 30
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.0040013790130615234,
        "is_functional_test": false
      },
      {
        "case_name": "更新内容为空时的错误处理测试",
        "purpose": "验证当更新内容为空字典时，工具是否正确抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "Alice"
          },
          "update": {}
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003998994827270508,
        "is_functional_test": false
      },
      {
        "case_name": "边界条件测试 - 数据库和集合名称包含特殊字符",
        "purpose": "验证工具能否正确处理数据库和集合名称中包含特殊字符（如中文、空格、符号等）的情况。",
        "args": {
          "database_name": "数据库_测试!@#",
          "collection_name": "集合_测试$%^",
          "query": {
            "用户": "张三"
          },
          "update": {
            "$set": {
              "年龄": 28
            }
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_update_document: 文档更新失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.007516145706176758,
        "is_functional_test": true
      }
    ],
    "mcp_delete_document": [
      {
        "case_name": "基本删除功能测试",
        "purpose": "验证在指定有效数据库、集合和查询条件下，mcp_delete_document工具可以成功删除单个文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "test_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004008054733276367,
        "is_functional_test": true
      },
      {
        "case_name": "批量删除功能测试",
        "purpose": "验证在multi=True模式下，mcp_delete_document工具可以批量删除符合条件的所有文档。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "category": "temp"
          },
          "multi": true
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003998279571533203,
        "is_functional_test": true
      },
      {
        "case_name": "无效数据库名称错误处理测试",
        "purpose": "验证当提供空字符串作为数据库名称时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "",
          "collection_name": "test_collection",
          "query": {
            "name": "test_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'database_name' 不能为空。"
        },
        "execution_time": 0.010000944137573242,
        "is_functional_test": false
      },
      {
        "case_name": "无效集合名称错误处理测试",
        "purpose": "验证当提供空字符串作为集合名称时，工具是否抛出ValueError异常。",
        "args": {
          "database_name": "test_db",
          "collection_name": "",
          "query": {
            "name": "test_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 'collection_name' 不能为空。"
        },
        "execution_time": 0.004995107650756836,
        "is_functional_test": false
      },
      {
        "case_name": "非法访问受保护数据库的安全性测试",
        "purpose": "验证工具是否限制对非本地或受保护数据库的非法访问尝试。",
        "args": {
          "database_name": "admin",
          "collection_name": "system.users",
          "query": {
            "username": "root"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.003997087478637695,
        "is_functional_test": false
      },
      {
        "case_name": "特殊字符数据库名称处理测试",
        "purpose": "验证数据库名称包含特殊字符（如中文、符号）时，工具是否能正确处理。",
        "args": {
          "database_name": "数据库_测试!@#",
          "collection_name": "集合_测试$%^",
          "query": {
            "字段": "值"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.007008552551269531,
        "is_functional_test": true
      },
      {
        "case_name": "无匹配文档时的行为测试",
        "purpose": "验证当没有文档满足删除条件时，工具是否能优雅返回失败消息而不报错。",
        "args": {
          "database_name": "test_db",
          "collection_name": "test_collection",
          "query": {
            "name": "nonexistent_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004508018493652344,
        "is_functional_test": true
      },
      {
        "case_name": "数据库连接失败时的错误处理测试",
        "purpose": "验证当目标数据库无法连接时，工具是否能正确捕获并抛出连接失败异常。",
        "args": {
          "database_name": "unreachable_db",
          "collection_name": "test_collection",
          "query": {
            "name": "test_document"
          }
        },
        "response": {
          "error": "ToolException: Error executing tool mcp_delete_document: 文档删除失败: 'MockMongoClient' object is not callable"
        },
        "execution_time": 0.004006147384643555,
        "is_functional_test": false
      }
    ]
  },
  "total_cases": 47
}