{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "qwen-plus-mcp_duckduckgo_search_and_cont",
  "server_path": "workspace/pipeline-output-servers/qwen-plus/mcp_duckduckgo_search_and_cont/refined/server.py",
  "timestamp": "2025-07-13T04:07:20.289457",
  "tools": [
    {
      "name": "duck_duck_go_search",
      "description": "\n    在 DuckDuckGo 搜索引擎上根据查询内容自动检索相关信息，并将搜索结果以结构化格式返回\n\n    Args:\n        query: 要搜索的关键词或短语 (必填)\n        max_results: 返回的最大结果数量，默认为5，范围1-10 (可选)\n\n    Returns:\n        包含搜索结果的字典列表，每个字典包含：\n        - title: 搜索结果标题 (string)\n        - link: 结果链接 (string)\n        - snippet: 结果摘要文本 (string)\n        - source: 来源网站域名 (string)\n\n    Raises:\n        ValueError: 如果查询为空或max_results超出范围\n        RuntimeError: 如果搜索失败\n\n    示例:\n        duck_duck_go_search(query=\"Python编程\", max_results=5)\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "max_results": {
            "default": 5,
            "title": "Max Results",
            "type": "integer"
          }
        },
        "required": [
          "query"
        ],
        "title": "duck_duck_go_searchArguments",
        "type": "object"
      }
    },
    {
      "name": "fetch_content",
      "description": "\n    根据提供的网页 URL 抓取并解析该网页的主要文本内容，去除无关元素后返回\n\n    Args:\n        url: 要抓取内容的网页 URL (必填)\n        remove_ads: 是否尝试移除广告内容，默认为 True (可选)\n        timeout: 请求超时时间（秒），默认为 10 (可选)\n\n    Returns:\n        包含网页内容的字典：\n        - title: 网页标题 (string)\n        - content: 清理后的正文内容 (string)\n        - domain: 网站域名 (string)\n        - status_code: HTTP 响应状态码 (int)\n        - word_count: 内容字数统计 (int)\n\n    Raises:\n        ValueError: 如果URL无效\n        httpx.HTTPStatusError: 如果HTTP请求失败\n\n    示例:\n        fetch_content(url=\"https://example.com\", remove_ads=True, timeout=10)\n    ",
      "args_schema": {
        "properties": {
          "url": {
            "title": "Url",
            "type": "string"
          },
          "remove_ads": {
            "default": true,
            "title": "Remove Ads",
            "type": "boolean"
          },
          "timeout": {
            "default": 10,
            "title": "Timeout",
            "type": "integer"
          }
        },
        "required": [
          "url"
        ],
        "title": "fetch_contentArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "duck_duck_go_search": [
      {
        "case_name": "基本搜索功能测试",
        "purpose": "验证duck_duck_go_search工具在正常输入下是否能返回预期的搜索结果",
        "args": {
          "query": "Python编程"
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://html.duckduckgo.com/html 202 Ratelimit"
        },
        "execution_time": 14.975920677185059,
        "is_functional_test": true
      },
      {
        "case_name": "指定最大结果数量的搜索测试",
        "purpose": "验证工具在指定max_results参数时能否正确返回指定数量的结果",
        "args": {
          "query": "人工智能",
          "max_results": 8
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://lite.duckduckgo.com/lite/ 202 Ratelimit"
        },
        "execution_time": 14.992244243621826,
        "is_functional_test": true
      },
      {
        "case_name": "空查询异常测试",
        "purpose": "验证当查询为空时，工具是否抛出ValueError异常",
        "args": {
          "query": ""
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: 'query' 参数不能为空。"
        },
        "execution_time": 0.004999399185180664,
        "is_functional_test": false
      },
      {
        "case_name": "超出范围的最大结果数测试",
        "purpose": "验证当max_results小于1或大于10时是否抛出ValueError",
        "args": {
          "query": "量子计算",
          "max_results": 15
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: max_results 必须在1到10之间"
        },
        "execution_time": 0.006999492645263672,
        "is_functional_test": false
      },
      {
        "case_name": "特殊字符查询测试",
        "purpose": "验证工具是否能正确处理包含特殊字符的查询",
        "args": {
          "query": "!@#$%^&*()_+中文混合搜索"
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://lite.duckduckgo.com/lite/ 202 Ratelimit"
        },
        "execution_time": 14.526952743530273,
        "is_functional_test": true
      },
      {
        "case_name": "最小结果数量测试",
        "purpose": "验证工具在max_results=1时是否只返回一个结果",
        "args": {
          "query": "区块链技术",
          "max_results": 1
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://html.duckduckgo.com/html 202 Ratelimit"
        },
        "execution_time": 14.750084161758423,
        "is_functional_test": true
      },
      {
        "case_name": "跨站脚本攻击模拟测试",
        "purpose": "验证工具是否对XSS攻击尝试进行安全过滤或拒绝执行",
        "args": {
          "query": "<script>alert('xss')</script>"
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://lite.duckduckgo.com/lite/ 202 Ratelimit"
        },
        "execution_time": 14.45930290222168,
        "is_functional_test": false
      },
      {
        "case_name": "SQL注入尝试测试",
        "purpose": "验证工具是否能够识别并阻止SQL注入攻击尝试",
        "args": {
          "query": "DROP TABLE users; SELECT * FROM information_schema.tables"
        },
        "response": {
          "error": "ToolException: Error executing tool duck_duck_go_search: DuckDuckGo搜索失败: https://html.duckduckgo.com/html 202 Ratelimit"
        },
        "execution_time": 14.515883445739746,
        "is_functional_test": false
      }
    ],
    "fetch_content": [
      {
        "case_name": "基本功能测试",
        "purpose": "验证fetch_content工具在正常输入下是否能正确抓取并解析网页内容，使用默认参数",
        "args": {
          "url": "https://example.com"
        },
        "response": {
          "result": "{\"title\": \"Example Domain\", \"content\": \"\\n\\nExample Domain\\n\\n\\n\\n\\n\\n\\n\\nExample Domain\\nThis domain is for use in illustrative examples in documents. You may use this\\n    domain in literature without prior coordination or asking for permission.\\nMore information...\\n\\n\\n\\n\", \"domain\": \"example.com\", \"status_code\": 200, \"word_count\": 30}"
        },
        "execution_time": 2.586623191833496,
        "is_functional_test": true
      },
      {
        "case_name": "禁用广告移除功能测试",
        "purpose": "验证当remove_ads设置为False时，工具是否仍能正常抓取网页内容",
        "args": {
          "url": "https://example.com",
          "remove_ads": false
        },
        "response": {
          "result": "{\"title\": \"Example Domain\", \"content\": \"\\n\\nExample Domain\\n\\n\\n\\n\\n\\n\\n\\nExample Domain\\nThis domain is for use in illustrative examples in documents. You may use this\\n    domain in literature without prior coordination or asking for permission.\\nMore information...\\n\\n\\n\\n\", \"domain\": \"example.com\", \"status_code\": 200, \"word_count\": 30}"
        },
        "execution_time": 4.841174602508545,
        "is_functional_test": true
      },
      {
        "case_name": "自定义超时时间测试",
        "purpose": "验证工具在指定timeout参数时能否在规定时间内处理请求或抛出超时异常",
        "args": {
          "url": "https://example.com",
          "timeout": 5
        },
        "response": {
          "result": "{\"title\": \"Example Domain\", \"content\": \"\\n\\nExample Domain\\n\\n\\n\\n\\n\\n\\n\\nExample Domain\\nThis domain is for use in illustrative examples in documents. You may use this\\n    domain in literature without prior coordination or asking for permission.\\nMore information...\\n\\n\\n\\n\", \"domain\": \"example.com\", \"status_code\": 200, \"word_count\": 30}"
        },
        "execution_time": 2.4156744480133057,
        "is_functional_test": true
      },
      {
        "case_name": "无效URL异常测试",
        "purpose": "验证当提供非法格式的URL时，工具是否抛出ValueError异常",
        "args": {
          "url": "invalid-url"
        },
        "response": {
          "error": "ToolException: Error executing tool fetch_content: URL 必须以 http:// 或 https:// 开头"
        },
        "execution_time": 0.0030007362365722656,
        "is_functional_test": false
      },
      {
        "case_name": "目标服务器不可达测试",
        "purpose": "验证当提供的URL指向无法访问的服务器时，工具是否抛出HTTPStatusError",
        "args": {
          "url": "http://nonexistentdomain123456789.com"
        },
        "response": {
          "result": "{\"title\": \"\", \"content\": \"HTTP请求失败: Server error '502 Bad Gateway' for url 'http://nonexistentdomain123456789.com'\\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502\", \"domain\": \"\", \"status_code\": 502, \"word_count\": 0}"
        },
        "execution_time": 2.258141279220581,
        "is_functional_test": false
      },
      {
        "case_name": "XSS攻击尝试测试",
        "purpose": "验证工具是否对包含脚本注入的URL进行安全过滤或拒绝执行",
        "args": {
          "url": "https://example.com/<script>alert('xss')</script>"
        },
        "response": {
          "result": "{\"title\": \"\", \"content\": \"HTTP请求失败: Client error '404 Not Found' for url 'https://example.com/%3Cscript%3Ealert('xss')%3C/script%3E'\\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\", \"domain\": \"\", \"status_code\": 404, \"word_count\": 0}"
        },
        "execution_time": 2.3021373748779297,
        "is_functional_test": false
      },
      {
        "case_name": "极短超时时间测试",
        "purpose": "验证当timeout设置为非常小的值（如0.1秒）时，工具是否能正确处理超时情况",
        "args": {
          "url": "https://example.com",
          "timeout": 1
        },
        "response": {
          "result": "{\"title\": \"Example Domain\", \"content\": \"\\n\\nExample Domain\\n\\n\\n\\n\\n\\n\\n\\nExample Domain\\nThis domain is for use in illustrative examples in documents. You may use this\\n    domain in literature without prior coordination or asking for permission.\\nMore information...\\n\\n\\n\\n\", \"domain\": \"example.com\", \"status_code\": 200, \"word_count\": 30}"
        },
        "execution_time": 1.5995934009552002,
        "is_functional_test": true
      },
      {
        "case_name": "长URL和特殊字符测试",
        "purpose": "验证工具是否能够正确处理包含特殊字符和较长路径的URL",
        "args": {
          "url": "https://example.com/path%20with%20spaces?query=中文&param=!@#$%^&*()"
        },
        "response": {
          "result": "{\"title\": \"\", \"content\": \"HTTP请求失败: Client error '404 Not Found' for url 'https://example.com/path%20with%20spaces?query=%E4%B8%AD%E6%96%87&param=!@#$%^&*()'\\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\", \"domain\": \"\", \"status_code\": 404, \"word_count\": 0}"
        },
        "execution_time": 2.883366346359253,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 16
}