{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "gemini-2.5-pro-mcp_unsplash_search_photos",
  "server_path": "workspace/pipeline-output-servers/gemini-2.5-pro/mcp_unsplash_search_photos/refined/server.py",
  "timestamp": "2025-07-13T04:04:25.251801",
  "tools": [
    {
      "name": "search_photos",
      "description": "\n    Searches for photos on Unsplash based on a query and optional filters.\n\n    This function queries the Unsplash API to find photos matching the specified\n    criteria. It requires an Unsplash API Access Key to be set as an\n    environment variable `UNSPLASH_ACCESS_KEY`. The function returns a JSON\n    string containing a list of photo objects, each with details like ID,\n    description, and various image URLs.\n\n    Args:\n        query (str): The search keywords (e.g., \"dogs\", \"office desk\").\n        page (int, optional): The page number to retrieve. Defaults to 1.\n        per_page (int, optional): The number of items per page (max 30).\n            Defaults to 10.\n        order_by (str, optional): The sort order for the results. Valid\n            options are \"latest\" or \"relevant\". Defaults to \"relevant\".\n        color (str, optional): A color filter for the search. Valid options\n            include \"black_and_white\", \"black\", \"white\", \"yellow\", \"orange\",\n            \"red\", \"purple\", \"magenta\", \"green\", \"teal\", \"blue\".\n            Defaults to None.\n        orientation (str, optional): A filter for the photo orientation.\n            Valid options are \"landscape\", \"portrait\", or \"squarish\".\n            Defaults to None.\n\n    Returns:\n        str: A JSON formatted string representing a list of photo objects.\n             If no photos are found, it returns a JSON string of an empty list.\n\n    Raises:\n        ValueError: If the `UNSPLASH_ACCESS_KEY` environment variable is not\n            set or if any of the provided arguments are invalid (e.g.,\n            `per_page` out of range, invalid `order_by` value).\n        httpx.HTTPStatusError: If the Unsplash API returns an HTTP error\n            (e.g., 4xx or 5xx status code).\n        RuntimeError: For any other unexpected errors during execution.\n\n    Example:\n        >>> # Assuming UNSPLASH_ACCESS_KEY is set in the environment\n        >>> # import asyncio\n        >>> # asyncio.run(search_photos(query=\"cats\", per_page=1, orientation=\"squarish\"))\n        '[\n          {\n            \"id\": \"some_photo_id\",\n            \"description\": \"a cat sitting on a window sill\",\n            \"width\": 4000,\n            \"height\": 4000,\n            \"urls\": {\n              \"raw\": \"...\",\n              \"full\": \"...\",\n              \"regular\": \"...\",\n              \"small\": \"...\",\n              \"thumb\": \"...\"\n            }\n          }\n        ]'\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 1,
            "title": "Page"
          },
          "per_page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 10,
            "title": "Per Page"
          },
          "order_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": "relevant",
            "title": "Order By"
          },
          "color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Color"
          },
          "orientation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Orientation"
          }
        },
        "required": [
          "query"
        ],
        "title": "search_photosArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_photos": [
      {
        "case_name": "Basic Photo Search",
        "purpose": "验证使用默认参数进行基本照片搜索的功能",
        "args": {
          "query": "nature"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"IicyiaPYGGI\",\n    \"description\": \"orange flowers\",\n    \"width\": 4928,\n    \"height\": 3264,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1465146344425-f00d5f5c8f07\"\n    }\n  },\n  {\n    \"id\": \"EwKXn5CapA4\",\n    \"description\": \"Finding my roots\",\n    \"width\": 3648,\n    \"height\": 5472,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1518495973542-4542c06a5843?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHxu...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13297字符，剩余11797字符"
        },
        "execution_time": 0.8989889621734619,
        "is_functional_test": true
      },
      {
        "case_name": "Photo Search With Page And PerPage",
        "purpose": "验证分页参数（page 和 per_page）对搜索结果的影响",
        "args": {
          "query": "mountains",
          "page": 2,
          "per_page": 5
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"3i5PHVp1Fkw\",\n    \"description\": \"TH\\u039e MISTY MOUNT\\u039bINS This is a composite of 5 images edited in \\u039bdobe Photoshop & Nik Software.\",\n    \"width\": 4000,\n    \"height\": 6000,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1570641963303-92ce4845ed4c\"\n    }\n  },\n  {\n    \"id\": \"g30P1zcOzXo\",\n    \"description\": \"Taken from the top of Poon Hill before sun rise\",\n    \"width\": 4928,\n ...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计6796字符，剩余5296字符"
        },
        "execution_time": 0.17442011833190918,
        "is_functional_test": true
      },
      {
        "case_name": "Sort Results By Latest",
        "purpose": "验证按最新排序的照片搜索功能",
        "args": {
          "query": "technology",
          "order_by": "latest"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"F4ottWBnCpM\",\n    \"description\": \"a laptop computer sitting on top of a white table\",\n    \"width\": 8256,\n    \"height\": 5504,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1648737966636-2fc3a5fffc8a\"\n    }\n  },\n  {\n    \"id\": \"DCq3Lfkkpjo\",\n    \"description\": \"A bullet train waits at a station platform.\",\n    \"width\": 3947,\n    \"height\": 5920,\n    \"urls\": {\n      \"raw\": \"h...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13766字符，剩余12266字符"
        },
        "execution_time": 0.17874860763549805,
        "is_functional_test": true
      },
      {
        "case_name": "Color Filter Black And White",
        "purpose": "验证黑白颜色过滤器的照片搜索功能",
        "args": {
          "query": "architecture",
          "color": "black_and_white"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"K67sBVqLLuw\",\n    \"description\": \"Axel Towers (Copenhagen) by Lundgaard & Tranberg\",\n    \"width\": 3994,\n    \"height\": 4992,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1527576539890-dfa815648363?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8fGJsYWNrX2FuZF93aGl0ZXwxNzUyMzUwNjg2fDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1527576539890-dfa815648363?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8fGJsYWNrX2FuZF93aGl0ZXwxNzUyMzUwNjg2fDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1527576539890-dfa815648363?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8fGJsYWNrX2FuZF93aGl0ZXwxNzUyMzUwNjg2fDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1527576539890-dfa815648363?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8fGJsYWNrX2FuZF93aGl0ZXwxNzUyMzUwNjg2fDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1527576539890-dfa815648363?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxhcmNoaXRlY3R1cmV8ZW58MHx8fGJsYWNrX2FuZF93aGl0ZXwxNzUyMzUwNjg2fDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1527576539890-dfa815648363\"\n    }\n  },\n  {\n    \"id\": \"asL4k-U3I_s\",\n    \"description\": \"Minimal wh...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计14402字符，剩余12902字符"
        },
        "execution_time": 0.46031618118286133,
        "is_functional_test": true
      },
      {
        "case_name": "Portrait Orientation Filter",
        "purpose": "验证竖直方向照片的搜索功能",
        "args": {
          "query": "people",
          "orientation": "portrait"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"X53e51WfjlE\",\n    \"description\": \"cross\",\n    \"width\": 4016,\n    \"height\": 6016,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1513682121497-80211f36a7d3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxwZW9wbGV8ZW58MHwxfHx8MTc1MjM0NjYzNHww&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1513682121497-80211f36a7d3\"\n    }\n  },\n  {\n    \"id\": \"mEZ3PoFGs_k\",\n    \"description\": \"Happy daughter\",\n    \"width\": 3744,\n    \"height\": 5616,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHxwZW9wbG...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计12797字符，剩余11297字符"
        },
        "execution_time": 0.18054771423339844,
        "is_functional_test": true
      },
      {
        "case_name": "Invalid OrderBy Value",
        "purpose": "验证无效的 order_by 参数值是否被正确拒绝",
        "args": {
          "query": "dogs",
          "order_by": "invalid_order"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: order_by must be 'latest' or 'relevant'."
        },
        "execution_time": 0.006669521331787109,
        "is_functional_test": false
      },
      {
        "case_name": "Exceed Max PerPage Limit",
        "purpose": "验证每页数量超过最大限制时是否抛出错误",
        "args": {
          "query": "flowers",
          "per_page": 31
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: per_page must be between 1 and 30."
        },
        "execution_time": 0.0034818649291992188,
        "is_functional_test": false
      },
      {
        "case_name": "Special Characters In Query",
        "purpose": "验证包含特殊字符的查询是否能正常处理",
        "args": {
          "query": "city @ night # lights"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"XaeeVEfhwfA\",\n    \"description\": \"A view of a city at night from a window\",\n    \"width\": 5998,\n    \"height\": 2510,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1722864727726-fc6de2d7fab4?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjaXR5JTIwJTQwJTIwbmlnaHQlMjAlMjMlMjBsaWdodHN8ZW58MHx8fHwxNzUyMzUwNjg4fDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1722864727726-fc6de2d7fab4?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjaXR5JTIwJTQwJTIwbmlnaHQlMjAlMjMlMjBsaWdodHN8ZW58MHx8fHwxNzUyMzUwNjg4fDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1722864727726-fc6de2d7fab4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjaXR5JTIwJTQwJTIwbmlnaHQlMjAlMjMlMjBsaWdodHN8ZW58MHx8fHwxNzUyMzUwNjg4fDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1722864727726-fc6de2d7fab4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjaXR5JTIwJTQwJTIwbmlnaHQlMjAlMjMlMjBsaWdodHN8ZW58MHx8fHwxNzUyMzUwNjg4fDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1722864727726-fc6de2d7fab4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjaXR5JTIwJTQwJTIwbmlnaHQlMjAlMjMlMjBsaWdodHN8ZW58MHx8fHwxNzUyMzUwNjg4fDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1722864727726-fc6de2d7fab4\"\n    }\n  },\n  {\n    \"id\": \"sCaDG0GmUIY\",...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计14625字符，剩余13125字符"
        },
        "execution_time": 1.0790021419525146,
        "is_functional_test": true
      }
    ]
  },
  "total_cases": 8
}