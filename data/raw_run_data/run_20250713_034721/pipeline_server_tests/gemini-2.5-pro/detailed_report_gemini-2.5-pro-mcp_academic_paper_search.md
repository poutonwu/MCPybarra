# server Test Report

Server Directory: refined
Generated at: 2025-07-13 04:05:05

# MCP 服务器测试评估报告

## 摘要

本次测试对 `gemini-2.5-pro-mcp_academic_paper_search` 服务器的学术论文搜索与获取功能进行了全面验证，涵盖功能性、健壮性、安全性、性能和透明性五个维度。整体来看：

- **功能性表现良好**：大多数基础功能用例语义成功，但存在部分工具调用被取消的问题。
- **健壮性较强**：绝大多数边界条件和异常输入得到了合理处理。
- **安全性达标**：未发现明显的安全漏洞，SQL注入和XSS尝试均被有效拦截。
- **性能表现中等偏上**：多数请求响应时间在可接受范围内，但部分长查询或高并发场景下延迟较高。
- **透明性一般**：错误信息较为清晰，但在某些情况下缺乏详细上下文。

---

## 详细评估

### 1. 功能性 (满分 30分)

#### 分析

| 工具名称         | 总用例数 | 语义成功数 | 成功率 |
|------------------|----------|------------|--------|
| search_papers    | 9        | 0          | 0%     |
| search_by_topic  | 12       | 10         | 83.3%  |
| fetch_paper_details | 8      | 7          | 87.5%  |
| **总计**         | **29**   | **17**     | **58.6%** |

> 注：search_papers 的所有测试用例都返回了“tool call was cancelled”，因此语义成功率极低；而其他两个工具表现较好。

#### 区间判断

- **总语义成功率为 58.6%**
- 属于 `≤60%` 区间
- 对应评分区间为 **18分以下**

#### 评分理由

尽管 `search_by_topic` 和 `fetch_paper_details` 表现良好，但由于 `search_papers` 几乎完全失败（全部被取消），导致总体功能性得分较低。

#### 评分

✅ **功能性: 17/30**

---

### 2. 健壮性 (满分 20分)

#### 分析

重点分析包含“边界”、“错误”、“非法”关键词的测试用例：

| 工具名称             | 异常用例数 | 正确处理数 | 处理率 |
|----------------------|------------|-------------|--------|
| search_papers        | 4          | 4           | 100%   |
| search_by_topic      | 6          | 6           | 100%   |
| fetch_paper_details  | 5          | 5           | 100%   |
| **总计**             | **15**     | **15**      | **100%** |

#### 区间判断

- 所有异常情况都被正确识别并处理
- 成功率 >95%
- 对应评分为 **20分**

#### 评分理由

所有边界测试（如空输入、负数限制、非法年份格式）都返回了明确且合理的错误提示，无任何崩溃或未捕获异常。

#### 评分

✅ **健壮性: 20/20**

---

### 3. 安全性 (满分 20分)

#### 分析

分析带有潜在攻击性的测试用例（如 SQL 注入、XSS 尝试）：

| 测试用例名称                     | 是否为安全测试 (`is_security_test`) | 结果是否安全拦截 |
|----------------------------------|-------------------------------------|------------------|
| SQL Injection Attempt in Topic Keywords | true                                | ✅ 是            |
| XSS Attempt in Topic Keywords    | true                                | ✅ 是            |
| SQL Injection Attempt in Paper ID | true                               | ✅ 是            |
| XSS Attempt in Paper ID          | true                                | ✅ 是            |

#### 评分理由

- 所有安全测试均未导致系统泄露或执行恶意内容
- 即使某些测试触发了正常响应（如返回空列表），也未暴露内部结构或引发副作用
- 无明显安全漏洞

#### 评分

✅ **安全性: 20/20**

---

### 4. 性能 (满分 20分)

#### 分析

基于 `execution_time` 字段评估响应速度：

- **快速响应（<1s）**：
  - `fetch_paper_details` 多数在 2s 内完成
  - `search_by_topic` 中短查询响应快（<5s）

- **中等响应（5~50s）**：
  - 部分 `search_by_topic` 超过 40s（可能因并发请求或数据量大）
  - `search_papers` 全部超时（50s）

- **慢速响应（接近或达到50s）**：
  - `search_papers` 所有用例均被取消，可能因并发机制或API限制

#### 评分理由

- 多数基本操作响应时间可接受
- 存在部分超时问题，尤其影响 `search_papers`
- 并发控制和API调用策略需优化

#### 评分

✅ **性能: 16/20**

---

### 5. 透明性 (满分 10分)

#### 分析

检查所有 `error` 字段内容：

- **优点**：
  - 错误信息结构统一，多以 JSON 格式返回
  - 包含具体错误类型（如参数类型、格式要求）
  - 明确指出出错的字段或逻辑（如“Query must be a non-empty string.”）

- **不足**：
  - 部分错误仅返回“tool call was cancelled”，缺乏上下文解释
  - 某些错误未提供堆栈跟踪或调试建议

#### 评分理由

- 错误信息整体清晰，有助于排查常见问题
- 个别用例错误描述过于模糊，影响调试效率

#### 评分

✅ **透明性: 8/10**

---

## 问题与建议

### 主要问题

1. **search_papers 工具几乎完全失效**
   - 所有测试用例均返回“tool call was cancelled”
   - 可能原因：并发控制不当、API限流、任务取消机制不完善

2. **部分请求响应时间过长**
   - 最长测试用例达 50s，严重影响用户体验

3. **错误信息不够详细**
   - “tool call was cancelled” 缺乏进一步说明，不利于定位问题

### 改进建议

1. **优化 `search_papers` 的实现逻辑**
   - 检查并发调用机制，确保不会因等待太久被取消
   - 添加超时控制和重试机制
   - 提供更详细的取消原因日志

2. **提升 API 调用效率**
   - 使用缓存机制减少重复请求
   - 对长查询进行预处理或摘要化

3. **增强错误信息的丰富性和可读性**
   - 返回更多上下文信息（如请求ID、API状态码）
   - 对“tool call was cancelled”添加子状态分类

---

## 结论

该服务器在学术论文搜索与获取方面具备良好的基础功能和较强的健壮性、安全性，能够有效应对各种异常输入和潜在攻击。然而，由于 `search_papers` 工具几乎完全失效，导致整体功能性大幅下降。性能方面表现尚可，但仍存在部分请求响应较慢的问题。错误信息整体清晰，但仍有改进空间。

建议优先修复 `search_papers` 工具，并优化长耗时请求的处理机制，以全面提升系统可用性和用户体验。

---

```
<SCORES>
功能性: 17/30
健壮性: 20/20
安全性: 20/20
性能: 16/20
透明性: 8/10
总分: 81/100
</SCORES>
```