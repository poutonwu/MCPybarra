{
  "server_name": "server",
  "parent_dir": "refined",
  "report_name": "gemini-2.5-pro-mcp_unsplash_search_photos",
  "server_path": "workspace/pipeline-output-servers/gemini-2.5-pro/mcp_unsplash_search_photos/refined/server.py",
  "timestamp": "2025-07-13T00:49:56.286536",
  "tools": [
    {
      "name": "search_photos",
      "description": "\n    Searches for photos on Unsplash based on a query and optional filters.\n\n    This function queries the Unsplash API to find photos matching the specified\n    criteria. It requires an Unsplash API Access Key to be set as an\n    environment variable `UNSPLASH_ACCESS_KEY`. The function returns a JSON\n    string containing a list of photo objects, each with details like ID,\n    description, and various image URLs.\n\n    Args:\n        query (str): The search keywords (e.g., \"dogs\", \"office desk\").\n        page (int, optional): The page number to retrieve. Defaults to 1.\n        per_page (int, optional): The number of items per page (max 30).\n            Defaults to 10.\n        order_by (str, optional): The sort order for the results. Valid\n            options are \"latest\" or \"relevant\". Defaults to \"relevant\".\n        color (str, optional): A color filter for the search. Valid options\n            include \"black_and_white\", \"black\", \"white\", \"yellow\", \"orange\",\n            \"red\", \"purple\", \"magenta\", \"green\", \"teal\", \"blue\".\n            Defaults to None.\n        orientation (str, optional): A filter for the photo orientation.\n            Valid options are \"landscape\", \"portrait\", or \"squarish\".\n            Defaults to None.\n\n    Returns:\n        str: A JSON formatted string representing a list of photo objects.\n             If no photos are found, it returns a JSON string of an empty list.\n\n    Raises:\n        ValueError: If the `UNSPLASH_ACCESS_KEY` environment variable is not\n            set or if any of the provided arguments are invalid (e.g.,\n            `per_page` out of range, invalid `order_by` value).\n        httpx.HTTPStatusError: If the Unsplash API returns an HTTP error\n            (e.g., 4xx or 5xx status code).\n        RuntimeError: For any other unexpected errors during execution.\n\n    Example:\n        >>> # Assuming UNSPLASH_ACCESS_KEY is set in the environment\n        >>> # import asyncio\n        >>> # asyncio.run(search_photos(query=\"cats\", per_page=1, orientation=\"squarish\"))\n        '[\n          {\n            \"id\": \"some_photo_id\",\n            \"description\": \"a cat sitting on a window sill\",\n            \"width\": 4000,\n            \"height\": 4000,\n            \"urls\": {\n              \"raw\": \"...\",\n              \"full\": \"...\",\n              \"regular\": \"...\",\n              \"small\": \"...\",\n              \"thumb\": \"...\"\n            }\n          }\n        ]'\n    ",
      "args_schema": {
        "properties": {
          "query": {
            "title": "Query",
            "type": "string"
          },
          "page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 1,
            "title": "Page"
          },
          "per_page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": 10,
            "title": "Per Page"
          },
          "order_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": "relevant",
            "title": "Order By"
          },
          "color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Color"
          },
          "orientation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Orientation"
          }
        },
        "required": [
          "query"
        ],
        "title": "search_photosArguments",
        "type": "object"
      }
    }
  ],
  "test_results": {
    "search_photos": [
      {
        "case_name": "Basic Photo Search",
        "purpose": "验证基本搜索功能在提供查询字符串时是否能正常工作，使用默认参数。",
        "args": {
          "query": "nature"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"IicyiaPYGGI\",\n    \"description\": \"orange flowers\",\n    \"width\": 4928,\n    \"height\": 3264,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxuYXR1cmV8ZW58MHx8fHwxNzUyMzIzODQwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1465146344425-f00d5f5c8f07\"\n    }\n  },\n  {\n    \"id\": \"EwKXn5CapA4\",\n    \"description\": \"Finding my roots\",\n    \"width\": 3648,\n    \"height\": 5472,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1518495973542-4542c06a5843?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHxu...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13297字符，剩余11797字符"
        },
        "execution_time": 1.7543048858642578,
        "is_functional_test": true
      },
      {
        "case_name": "Photo Search With Page and Per Page",
        "purpose": "验证分页参数（page 和 per_page）是否按预期工作。",
        "args": {
          "query": "mountains",
          "page": 2,
          "per_page": 5
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"3i5PHVp1Fkw\",\n    \"description\": \"TH\\u039e MISTY MOUNT\\u039bINS This is a composite of 5 images edited in \\u039bdobe Photoshop & Nik Software.\",\n    \"width\": 4000,\n    \"height\": 6000,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1570641963303-92ce4845ed4c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHw2fHxtb3VudGFpbnN8ZW58MHx8fHwxNzUyMzM5MDIwfDA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1570641963303-92ce4845ed4c\"\n    }\n  },\n  {\n    \"id\": \"g30P1zcOzXo\",\n    \"description\": \"Taken from the top of Poon Hill before sun rise\",\n    \"width\": 4928,\n ...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计6796字符，剩余5296字符"
        },
        "execution_time": 0.6922070980072021,
        "is_functional_test": true
      },
      {
        "case_name": "Search Ordered By Latest",
        "purpose": "验证按最新排序的搜索结果是否有效。",
        "args": {
          "query": "technology",
          "order_by": "latest"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"F4ottWBnCpM\",\n    \"description\": \"a laptop computer sitting on top of a white table\",\n    \"width\": 8256,\n    \"height\": 5504,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1648737966636-2fc3a5fffc8a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MXwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5fGVufDB8fDJ8fDE3NTIzMjQyMjd8MA&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1648737966636-2fc3a5fffc8a\"\n    }\n  },\n  {\n    \"id\": \"DCq3Lfkkpjo\",\n    \"description\": \"A bullet train waits at a station platform.\",\n    \"width\": 3947,\n    \"height\": 5920,\n    \"urls\": {\n      \"raw\": \"h...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13766字符，剩余12266字符"
        },
        "execution_time": 0.5050535202026367,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Color Filter",
        "purpose": "验证颜色过滤器是否能正确应用并返回对应颜色的照片。",
        "args": {
          "query": "cars",
          "color": "red"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"AzbEmyWfc7c\",\n    \"description\": \"Ferrari emblem\",\n    \"width\": 3505,\n    \"height\": 5257,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1532331679-8f5dc8e993cb?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYXJzfGVufDB8fHxyZWR8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1532331679-8f5dc8e993cb?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYXJzfGVufDB8fHxyZWR8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1532331679-8f5dc8e993cb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYXJzfGVufDB8fHxyZWR8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1532331679-8f5dc8e993cb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYXJzfGVufDB8fHxyZWR8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1532331679-8f5dc8e993cb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxjYXJzfGVufDB8fHxyZWR8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=80&w=200\",\n      \"small_s3\": \"https://s3.us-west-2.amazonaws.com/images.unsplash.com/small/photo-1532331679-8f5dc8e993cb\"\n    }\n  },\n  {\n    \"id\": \"GRKJ36EVGYE\",\n    \"description\": \"a red car with a sticker on it\",\n    \"width\": 3376,\n    \"height\": 6000,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1656803080787-a7b0a1580829?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwyfHx...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计12849字符，剩余11349字符"
        },
        "execution_time": 0.7096977233886719,
        "is_functional_test": true
      },
      {
        "case_name": "Search With Orientation Filter",
        "purpose": "验证方向过滤器是否能正确筛选照片方向。",
        "args": {
          "query": "landscape",
          "orientation": "landscape"
        },
        "response": {
          "result": "[\n  {\n    \"id\": \"NRQV-hBF10M\",\n    \"description\": \"I was freezing cold staying in the tent cabins in Half Dome (formerly Curry) Village in Yosemite Valley with my dad who was there for work, so I got up and drove around the valley at 6 am. There\\u2019s been lots of fires in the area and the valley was filled with this thick smoke. Stopped at a turnout near Tunnel View and shot this photo - I really love the symmetry of it and the smooth gradients the smoke produces.\",\n    \"width\": 7360,\n    \"height\": 4912,\n    \"urls\": {\n      \"raw\": \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxsYW5kc2NhcGV8ZW58MHwwfHx8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0\",\n      \"full\": \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxsYW5kc2NhcGV8ZW58MHwwfHx8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=85\",\n      \"regular\": \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxsYW5kc2NhcGV8ZW58MHwwfHx8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=80&w=1080\",\n      \"small\": \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxfHxsYW5kc2NhcGV8ZW58MHwwfHx8MTc1MjMzOTAyMXww&ixlib=rb-4.1.0&q=80&w=400\",\n      \"thumb\": \"https://images.unsplash.com/photo-1506744038136-46273834b3fb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NjQwNzV8MHwxfHNlYXJjaHwxf...[截断]，输出已被MCP适配器截断，这是适配器的限制而非工具本身的问题。共计13979字符，剩余12479字符"
        },
        "execution_time": 0.9927496910095215,
        "is_functional_test": true
      },
      {
        "case_name": "Empty Query Test",
        "purpose": "验证工具是否拒绝空查询参数。",
        "args": {
          "query": ""
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: API request failed with status 400: {\"errors\":[\"query is empty\"]}"
        },
        "execution_time": 0.764279842376709,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Per Page Value",
        "purpose": "验证当 per_page 参数超出允许范围时是否抛出错误。",
        "args": {
          "query": "flowers",
          "per_page": 31
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: per_page must be between 1 and 30."
        },
        "execution_time": 0.003999233245849609,
        "is_functional_test": false
      },
      {
        "case_name": "Invalid Order By Value",
        "purpose": "验证无效的 order_by 值是否会引发 ValueError。",
        "args": {
          "query": "dogs",
          "order_by": "popular"
        },
        "response": {
          "error": "ToolException: Error executing tool search_photos: order_by must be 'latest' or 'relevant'."
        },
        "execution_time": 0.007002830505371094,
        "is_functional_test": false
      }
    ]
  },
  "total_cases": 8
}