# MCP Git 服务器实现计划

## MCP 工具计划

### 1. `git_init` 工具
- **描述**: 初始化一个新的Git仓库
- **参数**:
  - `repo_path` (字符串): 新仓库的文件路径
- **返回值**: 包含初始化状态的字典，包括仓库路径和初始化成功状态

### 2. `git_status` 工具
- **描述**: 获取仓库当前状态
- **参数**:
  - `repo_path` (字符串): 仓库路径
- **返回值**: 包含仓库状态信息的字典，如当前分支、修改文件列表等

### 3. `git_add` 工具
- **描述**: 将文件添加到暂存区
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `file_path` (字符串): 要添加的文件路径
- **返回值**: 包含操作结果的字典，包括成功或失败的状态及消息

### 4. `git_diff_unstaged` 工具
- **描述**: 查看未暂存的差异
- **参数**:
  - `repo_path` (字符串): 仓库路径
- **返回值**: 包含未暂存差异内容的字符串

### 5. `git_diff_staged` 工具
- **描述**: 查看已暂存的差异
- **参数**:
  - `repo_path` (字符串): 仓库路径
- **返回值**: 包含已暂存差异内容的字符串

### 6. `git_diff` 工具
- **描述**: 比较分支或提交
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `commit1` (字符串): 第一个比较的提交哈希或分支名
  - `commit2` (字符串): 第二个比较的提交哈希或分支名
- **返回值**: 包含两个提交之间差异内容的字符串

### 7. `git_commit` 工具
- **描述**: 提交更改
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `message` (字符串): 提交信息
- **返回值**: 包含提交结果的字典，包括提交哈希和消息

### 8. `git_reset` 工具
- **描述**: 取消暂存文件
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `file_path` (字符串): 要取消暂存的文件路径
- **返回值**: 包含操作结果的字典，包括成功或失败的状态及消息

### 9. `git_log` 工具
- **描述**: 查看提交历史
- **参数**:
  - `repo_path` (字符串): 仓库路径
- **返回值**: 包含提交历史的列表，每个条目包含提交哈希、作者、日期和消息

### 10. `git_create_branch` 工具
- **描述**: 创建新分支
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `branch_name` (字符串): 新分支名称
- **返回值**: 包含操作结果的字典，包括成功或失败的状态及消息

### 11. `git_checkout` 工具
- **描述**: 切换分支
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `branch_name` (字符串): 要切换到的分支名称
- **返回值**: 包含操作结果的字典，包括成功或失败的状态及消息

### 12. `git_show` 工具
- **描述**: 显示提交的详细内容
- **参数**:
  - `repo_path` (字符串): 仓库路径
  - `commit_hash` (字符串): 要显示的提交哈希
- **返回值**: 包含提交详细信息的字符串，包括元数据和差异内容

## 服务器概述
该MCP服务器将提供全面的Git仓库管理功能，允许用户通过定义的工具集执行常见的Git操作。这包括初始化仓库、查看状态、添加文件、查看差异、提交更改、重置、查看提交历史、创建和切换分支以及显示提交详情。

## 生成文件
- **文件名**: `mcp_git_server.py`
- **内容**: 包含所有必要的导入、GitPython交互逻辑、MCP工具注册和服务器运行代码

## 依赖项
- `mcp[cli]` - 用于MCP服务器框架
- `GitPython` - 用于Git操作