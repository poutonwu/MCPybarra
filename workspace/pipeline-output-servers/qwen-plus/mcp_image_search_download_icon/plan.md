# MCP 服务器实施计划：图像搜索、下载与图标生成

## MCP 工具计划

### `search_images` 工具
- **描述**: 根据用户输入的关键词，在 Pexels 图像源中自动检索相关图片，并返回包含图片链接、作者等信息的结构化结果。
- **参数**:
  - `query` (字符串, 必填): 搜索关键词（例如 `"nature landscape"`）。
  - `per_page` (整数, 可选): 每页返回的图片数量，默认为 5，最大值为 10。
- **返回值**: 包含以下字段的 JSON 列表：
  - `url` (字符串): 高清图片链接。
  - `photographer` (字符串): 摄影师名称。
  - `source` (字符串): 图片来源（Pexels 页面链接）。

---

### `download_image` 工具
- **描述**: 根据用户提供的图片 URL 和文件名，将图片下载并保存到指定目录，返回保存状态和路径信息。
- **参数**:
  - `image_url` (字符串, 必填): 要下载的图片 URL。
  - `filename` (字符串, 必填): 保存的文件名（例如 `"landscape.jpg"`）。
  - `save_dir` (字符串, 可选): 保存图片的目录路径，默认为当前工作目录下的 `downloads/` 文件夹。
- **返回值**: 包含以下字段的 JSON 对象：
  - `status` (布尔值): 下载是否成功。
  - `file_path` (字符串): 图片保存的完整路径（如果失败则为 `null`）。

---

### `generate_icon` 工具
- **描述**: 根据用户输入的图标描述词，自动生成指定尺寸的图标图片；如未配置云端生成服务，则用本地样例图标模拟生成。
- **参数**:
  - `description` (字符串, 必填): 图标描述词（例如 `"settings icon blue color"`）。
  - `size` (元组, 可选): 图标的宽度和高度（默认为 `(64, 64)`）。
  - `use_cloud` (布尔值, 可选): 是否使用云端图标生成服务（默认为 `False`）。
- **返回值**: 包含以下字段的 JSON 对象：
  - `status` (布尔值): 生成是否成功。
  - `file_path` (字符串): 图标保存的完整路径（如果失败则为 `null`）。

---

## 服务器概述
本服务器提供基于 MCP 协议的图像处理功能，包括图像搜索、下载和图标生成。通过集成 Pexels API 实现图像搜索，使用 Python 的 `requests` 库实现图像下载，图标生成功能支持本地模拟或未来扩展的云端服务。

---

## 将要生成的文件
- **文件名**: `mcp_image_server.py`

---

## 依赖项
- `mcp[cli]` (用于 MCP 协议)
- `requests` (用于 HTTP 请求)
- `Pillow` (用于图像处理)
- `pathlib` (用于路径管理)